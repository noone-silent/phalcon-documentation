<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Phalcon Framework. A full-stack PHP framework delivered as a PHP extension, offering lower resource consumption and high performance."><meta name=author content="Phalcon Team"><link href=https://docs.phalcon.io/5.7/tutorial-vokuro/ rel=canonical><link href=../tutorial-rest/ rel=prev><link href=../use-case/ rel=next><link rel=icon href=../assets/images/favicon.ico><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.26"><title>Vokuro - Phalcon Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.6543a935.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Titillium+Web:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Titillium Web";--md-code-font:"Source Code Pro"}</style><link rel=stylesheet href=../assets/css/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-JR4REKBKH3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-JR4REKBKH3",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-JR4REKBKH3",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Fanart --><!--

Phalcon Framework

A full-stack PHP framework delivered as a PHP extension,
offering lower resource consumption and high performance.

<3 Phalcon Team

                         ..
                         ....
   %                  ,   ......
     %%%               ,,  .......
      %%%%%%           ,,,,.........
       %%%%%%%%&        ,,,,,.........,
    /    %%%%%%%%%%      ,,,,,,..........
      //  %%%%%%%%%%%%%    ,,,,,,..........
       //// %%%%%%%%%%%%%%%  ,,,,,,..........,
         ////%%%%%%%%%%%%%%%%%%,,,,,,...........
          ///////%%%%%%%%%%%%%%%%%%,,,,...........
            ////////%%%%%%%%%%%%%%%%%%/,,...........
          %%%%/////////(%%%%%%%%%%%%%%%%%%,..........
            %%%%%//////////%%%%%%%%%%%%%%%%%%........(
               %%%%///////////(%%%%%%%%%%%%%%%%.......(
                 %%%%%////////////%%%%%%%%%%%%%%%.....//
                ....%%%%%////////////#%%%%%%%%%%%%%....//
                   .......(%/////////////%%%%%%%%%%%%..  /
                      ...........///////********/%%%%%..
                     ,,,,.............,/***************.
                         ,,,,,.............************......,/(
                               ,,,,,,..........********.....//////////
                              ((((((((**((((((((((((((*.....///////////
                                  %*********.../(((((((..........///(/#/
                               **********..........#%%%           ..*%%%
                            *********(..........%%%                  %%%
                         *********/..........%%%                     %%
                   %    *******%%.........%%%%
                  %   ******%%%%...../.*((((((   %%%%
                     ****%%%%%%.....///* (((((((%%%%%
                    ***&%%%%%%.....////* ((((((((%%  %
                    *  &%%%%%#..../////*  (((     %
                       &%%%%%....//////*           %
                        %%%% ....//////***   %%%
                     (  %%%   ...*/////*****%%%%
                     (   %     ...  //(*****/%%
                      (  &      ..   // ***  %%
                                 .     /      %
--><!-- Fanart --></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#tutorial-vokuro class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Phalcon Documentation" class="md-header__button md-logo" aria-label="Phalcon Documentation" data-md-component=logo> <img src=https://assets.phalcon.io/phalcon/images/svg/phalcon-logo-35x39.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Phalcon Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Vokuro </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=teal aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=teal aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/phalcon/documentation title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> phalcon/documentation </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../introduction/ class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../installation/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../application/ class=md-tabs__link> Core </a> </li> <li class=md-tabs__item> <a href=../db-layer/ class=md-tabs__link> Database </a> </li> <li class=md-tabs__item> <a href=../assets/ class=md-tabs__link> Front End </a> </li> <li class=md-tabs__item> <a href=../acl/ class=md-tabs__link> Business Logic </a> </li> <li class=md-tabs__item> <a href=../cache/ class=md-tabs__link> Services </a> </li> <li class=md-tabs__item> <a href=../api/ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=https://github.com/orgs/phalcon/discussions class=md-tabs__link> Discussions </a> </li> <li class=md-tabs__item> <a href=https://blog.phalcon.io/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Phalcon Documentation" class="md-nav__button md-logo" aria-label="Phalcon Documentation" data-md-component=logo> <img src=https://assets.phalcon.io/phalcon/images/svg/phalcon-logo-35x39.svg alt=logo> </a> Phalcon Documentation </label> <div class=md-nav__source> <a href=https://github.com/phalcon/documentation title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> phalcon/documentation </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_2> <label class=md-nav__link for=__nav_1_2 id=__nav_1_2_label tabindex=0> <span class=md-ellipsis> Changelog </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_1_2> <span class="md-nav__icon md-icon"></span> Changelog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://github.com/phalcon/cphalcon/blob/5.0.x/CHANGELOG-5.0.md class=md-nav__link> <span class=md-ellipsis> Current Version </span> </a> </li> <li class=md-nav__item> <a href=../releases/ class=md-nav__link> <span class=md-ellipsis> Releases </span> </a> </li> <li class=md-nav__item> <a href=../upgrade/ class=md-nav__link> <span class=md-ellipsis> How to upgrade </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_3> <label class=md-nav__link for=__nav_1_3 id=__nav_1_3_label tabindex=0> <span class=md-ellipsis> Contributing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../contributions/ class=md-nav__link> <span class=md-ellipsis> Contributions </span> </a> </li> <li class=md-nav__item> <a href=https://phalcon.io/discussions class=md-nav__link> <span class=md-ellipsis> Asking a question </span> </a> </li> <li class=md-nav__item> <a href=../new-feature-request/ class=md-nav__link> <span class=md-ellipsis> Requesting a change </span> </a> </li> <li class=md-nav__item> <a href=../new-pull-request/ class=md-nav__link> <span class=md-ellipsis> Issuing a Pull Request </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_4> <label class=md-nav__link for=__nav_1_4 id=__nav_1_4_label tabindex=0> <span class=md-ellipsis> Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../generating-backtrace/ class=md-nav__link> <span class=md-ellipsis> Backtrace Generation </span> </a> </li> <li class=md-nav__item> <a href=../reproducible-tests/ class=md-nav__link> <span class=md-ellipsis> Reproducible Tests </span> </a> </li> <li class=md-nav__item> <a href=../testing-environment/ class=md-nav__link> <span class=md-ellipsis> Testing environment </span> </a> </li> <li class=md-nav__item> <a href=../coding-standard/ class=md-nav__link> <span class=md-ellipsis> Coding Standard </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../sponsors/ class=md-nav__link> <span class=md-ellipsis> Sponsoring </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../webserver-setup/ class=md-nav__link> <span class=md-ellipsis> Webserver Setup </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex> <span class=md-ellipsis> Environments </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Environments </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../environments-devilbox/ class=md-nav__link> <span class=md-ellipsis> Devilbox </span> </a> </li> <li class=md-nav__item> <a href=../environments-nanobox/ class=md-nav__link> <span class=md-ellipsis> Nanobox </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex> <span class=md-ellipsis> Development Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Development Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../devtools/ class=md-nav__link> <span class=md-ellipsis> Devtools </span> </a> </li> <li class=md-nav__item> <a href=../support-debug/ class=md-nav__link> <span class=md-ellipsis> Debug </span> </a> </li> <li class=md-nav__item> <a href=../db-migrations/ class=md-nav__link> <span class=md-ellipsis> Migrations </span> </a> </li> <li class=md-nav__item> <a href=../unit-testing/ class=md-nav__link> <span class=md-ellipsis> Unit Testing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5 checked> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=true> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tutorial-basic/ class=md-nav__link> <span class=md-ellipsis> Basic </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-invo/ class=md-nav__link> <span class=md-ellipsis> Invo </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-rest/ class=md-nav__link> <span class=md-ellipsis> REST </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Vokuro </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Vokuro </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#vokuro class=md-nav__link> <span class=md-ellipsis> Vökuró </span> </a> </li> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> <nav class=md-nav aria-label=Installation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#downloading class=md-nav__link> <span class=md-ellipsis> Downloading </span> </a> </li> <li class=md-nav__item> <a href=#extensions class=md-nav__link> <span class=md-ellipsis> Extensions </span> </a> </li> <li class=md-nav__item> <a href=#run class=md-nav__link> <span class=md-ellipsis> Run </span> </a> </li> <li class=md-nav__item> <a href=#docker class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#structure class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#env class=md-nav__link> <span class=md-ellipsis> .env </span> </a> </li> <li class=md-nav__item> <a href=#database class=md-nav__link> <span class=md-ellipsis> Database </span> </a> </li> <li class=md-nav__item> <a href=#config class=md-nav__link> <span class=md-ellipsis> Config </span> </a> </li> <li class=md-nav__item> <a href=#providers class=md-nav__link> <span class=md-ellipsis> Providers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#composer class=md-nav__link> <span class=md-ellipsis> Composer </span> </a> </li> <li class=md-nav__item> <a href=#bootstrapping class=md-nav__link> <span class=md-ellipsis> Bootstrapping </span> </a> <nav class=md-nav aria-label=Bootstrapping> <ul class=md-nav__list> <li class=md-nav__item> <a href=#entry class=md-nav__link> <span class=md-ellipsis> Entry </span> </a> </li> <li class=md-nav__item> <a href=#application class=md-nav__link> <span class=md-ellipsis> Application </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#database_1 class=md-nav__link> <span class=md-ellipsis> Database </span> </a> </li> <li class=md-nav__item> <a href=#models class=md-nav__link> <span class=md-ellipsis> Models </span> </a> </li> <li class=md-nav__item> <a href=#controllers class=md-nav__link> <span class=md-ellipsis> Controllers </span> </a> </li> <li class=md-nav__item> <a href=#views class=md-nav__link> <span class=md-ellipsis> Views </span> </a> </li> <li class=md-nav__item> <a href=#components class=md-nav__link> <span class=md-ellipsis> Components </span> </a> <nav class=md-nav aria-label=Components> <ul class=md-nav__list> <li class=md-nav__item> <a href=#acl class=md-nav__link> <span class=md-ellipsis> Acl </span> </a> </li> <li class=md-nav__item> <a href=#auth class=md-nav__link> <span class=md-ellipsis> Auth </span> </a> </li> <li class=md-nav__item> <a href=#mail class=md-nav__link> <span class=md-ellipsis> Mail </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sign-up class=md-nav__link> <span class=md-ellipsis> Sign Up </span> </a> <nav class=md-nav aria-label="Sign Up"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#controller class=md-nav__link> <span class=md-ellipsis> Controller </span> </a> </li> <li class=md-nav__item> <a href=#form class=md-nav__link> <span class=md-ellipsis> Form </span> </a> </li> <li class=md-nav__item> <a href=#view class=md-nav__link> <span class=md-ellipsis> View </span> </a> </li> <li class=md-nav__item> <a href=#post class=md-nav__link> <span class=md-ellipsis> Post </span> </a> </li> <li class=md-nav__item> <a href=#model class=md-nav__link> <span class=md-ellipsis> Model </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../use-case/ class=md-nav__link> <span class=md-ellipsis> Use case </span> </a> </li> <li class=md-nav__item> <a href=../performance/ class=md-nav__link> <span class=md-ellipsis> Performance </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Core </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../application/ class=md-nav__link> <span class=md-ellipsis> Application </span> </a> </li> <li class=md-nav__item> <a href=../application-micro/ class=md-nav__link> <span class=md-ellipsis> Micro </span> </a> </li> <li class=md-nav__item> <a href=../application-cli/ class=md-nav__link> <span class=md-ellipsis> CLI </span> </a> </li> <li class=md-nav__item> <a href=../di/ class=md-nav__link> <span class=md-ellipsis> DI Container </span> </a> </li> <li class=md-nav__item> <a href=../mvc/ class=md-nav__link> <span class=md-ellipsis> MVC </span> </a> </li> <li class=md-nav__item> <a href=../namespaces/ class=md-nav__link> <span class=md-ellipsis> Namespaces </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Database </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Database </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../db-layer/ class=md-nav__link> <span class=md-ellipsis> Layer </span> </a> </li> <li class=md-nav__item> <a href=../db-phql/ class=md-nav__link> <span class=md-ellipsis> PHQL </span> </a> </li> <li class=md-nav__item> <a href=../db-odm/ class=md-nav__link> <span class=md-ellipsis> ODM </span> </a> </li> <li class=md-nav__item> <a href=../db-models/ class=md-nav__link> <span class=md-ellipsis> Models </span> </a> </li> <li class=md-nav__item> <a href=../db-models-behaviors/ class=md-nav__link> <span class=md-ellipsis> Behaviors </span> </a> </li> <li class=md-nav__item> <a href=../db-models-cache/ class=md-nav__link> <span class=md-ellipsis> Cache </span> </a> </li> <li class=md-nav__item> <a href=../db-models-events/ class=md-nav__link> <span class=md-ellipsis> Events </span> </a> </li> <li class=md-nav__item> <a href=../db-models-metadata/ class=md-nav__link> <span class=md-ellipsis> Metadata </span> </a> </li> <li class=md-nav__item> <a href=../db-models-relationships/ class=md-nav__link> <span class=md-ellipsis> Relationships </span> </a> </li> <li class=md-nav__item> <a href=../db-models-transactions/ class=md-nav__link> <span class=md-ellipsis> Transactions </span> </a> </li> <li class=md-nav__item> <a href=../db-models-validation/ class=md-nav__link> <span class=md-ellipsis> Validators </span> </a> </li> <li class=md-nav__item> <a href=../db-pagination/ class=md-nav__link> <span class=md-ellipsis> Pagination </span> </a> </li> <li class=md-nav__item> <a href=../db-migrations/ class=md-nav__link> <span class=md-ellipsis> Migrations </span> </a> </li> <li class=md-nav__item> <a href=../datamapper/ class=md-nav__link> <span class=md-ellipsis> DataMapper </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Front End </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Front End </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../assets/ class=md-nav__link> <span class=md-ellipsis> Assets </span> </a> </li> <li class=md-nav__item> <a href=../flash/ class=md-nav__link> <span class=md-ellipsis> Flash Messenger </span> </a> </li> <li class=md-nav__item> <a href=../forms/ class=md-nav__link> <span class=md-ellipsis> Forms </span> </a> </li> <li class=md-nav__item> <a href=../image/ class=md-nav__link> <span class=md-ellipsis> Image </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> HTML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> HTML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../html-attributes/ class=md-nav__link> <span class=md-ellipsis> Attributes </span> </a> </li> <li class=md-nav__item> <a href=../html-breadcrumbs/ class=md-nav__link> <span class=md-ellipsis> Breadcrumbs </span> </a> </li> <li class=md-nav__item> <a href=../html-escaper/ class=md-nav__link> <span class=md-ellipsis> Escaper </span> </a> </li> <li class=md-nav__item> <a href=../html-link/ class=md-nav__link> <span class=md-ellipsis> Link </span> </a> </li> <li class=md-nav__item> <a href=../html-tagfactory/ class=md-nav__link> <span class=md-ellipsis> Tag Factory </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../tag/ class=md-nav__link> <span class=md-ellipsis> Tag (legacy) </span> </a> </li> <li class=md-nav__item> <a href=../views/ class=md-nav__link> <span class=md-ellipsis> View </span> </a> </li> <li class=md-nav__item> <a href=../volt/ class=md-nav__link> <span class=md-ellipsis> Volt </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Business Logic </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Business Logic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../acl/ class=md-nav__link> <span class=md-ellipsis> Access Control Lists </span> </a> </li> <li class=md-nav__item> <a href=../annotations/ class=md-nav__link> <span class=md-ellipsis> Annotations </span> </a> </li> <li class=md-nav__item> <a href=../controllers/ class=md-nav__link> <span class=md-ellipsis> Controllers </span> </a> </li> <li class=md-nav__item> <a href=../dispatcher/ class=md-nav__link> <span class=md-ellipsis> Dispatcher </span> </a> </li> <li class=md-nav__item> <a href=../events/ class=md-nav__link> <span class=md-ellipsis> Event Manager </span> </a> </li> <li class=md-nav__item> <a href=../filter-filter/ class=md-nav__link> <span class=md-ellipsis> Filters </span> </a> </li> <li class=md-nav__item> <a href=../routing/ class=md-nav__link> <span class=md-ellipsis> Routing </span> </a> </li> <li class=md-nav__item> <a href=../session/ class=md-nav__link> <span class=md-ellipsis> Sessions </span> </a> </li> <li class=md-nav__item> <a href=../mvc-url/ class=md-nav__link> <span class=md-ellipsis> Url </span> </a> </li> <li class=md-nav__item> <a href=../filter-validation/ class=md-nav__link> <span class=md-ellipsis> Validation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Services </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cache/ class=md-nav__link> <span class=md-ellipsis> Cache </span> </a> </li> <li class=md-nav__item> <a href=../config/ class=md-nav__link> <span class=md-ellipsis> Config </span> </a> </li> <li class=md-nav__item> <a href=../html-escaper/ class=md-nav__link> <span class=md-ellipsis> Escaper </span> </a> </li> <li class=md-nav__item> <a href=../autoload/ class=md-nav__link> <span class=md-ellipsis> Loader </span> </a> </li> <li class=md-nav__item> <a href=../logger/ class=md-nav__link> <span class=md-ellipsis> Logger </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_6> <label class=md-nav__link for=__nav_7_6 id=__nav_7_6_label tabindex=0> <span class=md-ellipsis> HTTP </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_6_label aria-expanded=false> <label class=md-nav__title for=__nav_7_6> <span class="md-nav__icon md-icon"></span> HTTP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../response.md#cookies class=md-nav__link> <span class=md-ellipsis> Cookies </span> </a> </li> <li class=md-nav__item> <a href=../request/ class=md-nav__link> <span class=md-ellipsis> Request </span> </a> </li> <li class=md-nav__item> <a href=../response/ class=md-nav__link> <span class=md-ellipsis> Response </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_7> <label class=md-nav__link for=__nav_7_7 id=__nav_7_7_label tabindex=0> <span class=md-ellipsis> i18n </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7_7> <span class="md-nav__icon md-icon"></span> i18n </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../i18n/ class=md-nav__link> <span class=md-ellipsis> Internationalization </span> </a> </li> <li class=md-nav__item> <a href=../translate/ class=md-nav__link> <span class=md-ellipsis> Translate </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../queue/ class=md-nav__link> <span class=md-ellipsis> Queue </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_9> <label class=md-nav__link for=__nav_7_9 id=__nav_7_9_label tabindex=0> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_9_label aria-expanded=false> <label class=md-nav__title for=__nav_7_9> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../encryption-crypt/ class=md-nav__link> <span class=md-ellipsis> Cryptography </span> </a> </li> <li class=md-nav__item> <a href=../encryption-security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../encryption-security-jwt/ class=md-nav__link> <span class=md-ellipsis> JWT </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../storage/ class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_11> <label class=md-nav__link for=__nav_7_11 id=__nav_7_11_label tabindex=0> <span class=md-ellipsis> Utility </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_11_label aria-expanded=false> <label class=md-nav__title for=__nav_7_11> <span class="md-nav__icon md-icon"></span> Utility </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../support-collection/ class=md-nav__link> <span class=md-ellipsis> Collection </span> </a> </li> <li class=md-nav__item> <a href=../domain/ class=md-nav__link> <span class=md-ellipsis> Domain </span> </a> </li> <li class=md-nav__item> <a href=../support-helper/ class=md-nav__link> <span class=md-ellipsis> Helper </span> </a> </li> <li class=md-nav__item> <a href=../support-registry/ class=md-nav__link> <span class=md-ellipsis> Registry </span> </a> </li> <li class=md-nav__item> <a href=../support-version/ class=md-nav__link> <span class=md-ellipsis> Version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../api/ class=md-nav__link> <span class=md-ellipsis> API </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/orgs/phalcon/discussions class=md-nav__link> <span class=md-ellipsis> Discussions </span> </a> </li> <li class=md-nav__item> <a href=https://blog.phalcon.io/ class=md-nav__link> <span class=md-ellipsis> Blog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#vokuro class=md-nav__link> <span class=md-ellipsis> Vökuró </span> </a> </li> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> <nav class=md-nav aria-label=Installation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#downloading class=md-nav__link> <span class=md-ellipsis> Downloading </span> </a> </li> <li class=md-nav__item> <a href=#extensions class=md-nav__link> <span class=md-ellipsis> Extensions </span> </a> </li> <li class=md-nav__item> <a href=#run class=md-nav__link> <span class=md-ellipsis> Run </span> </a> </li> <li class=md-nav__item> <a href=#docker class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#structure class=md-nav__link> <span class=md-ellipsis> Structure </span> </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> <nav class=md-nav aria-label=Configuration> <ul class=md-nav__list> <li class=md-nav__item> <a href=#env class=md-nav__link> <span class=md-ellipsis> .env </span> </a> </li> <li class=md-nav__item> <a href=#database class=md-nav__link> <span class=md-ellipsis> Database </span> </a> </li> <li class=md-nav__item> <a href=#config class=md-nav__link> <span class=md-ellipsis> Config </span> </a> </li> <li class=md-nav__item> <a href=#providers class=md-nav__link> <span class=md-ellipsis> Providers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#composer class=md-nav__link> <span class=md-ellipsis> Composer </span> </a> </li> <li class=md-nav__item> <a href=#bootstrapping class=md-nav__link> <span class=md-ellipsis> Bootstrapping </span> </a> <nav class=md-nav aria-label=Bootstrapping> <ul class=md-nav__list> <li class=md-nav__item> <a href=#entry class=md-nav__link> <span class=md-ellipsis> Entry </span> </a> </li> <li class=md-nav__item> <a href=#application class=md-nav__link> <span class=md-ellipsis> Application </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#database_1 class=md-nav__link> <span class=md-ellipsis> Database </span> </a> </li> <li class=md-nav__item> <a href=#models class=md-nav__link> <span class=md-ellipsis> Models </span> </a> </li> <li class=md-nav__item> <a href=#controllers class=md-nav__link> <span class=md-ellipsis> Controllers </span> </a> </li> <li class=md-nav__item> <a href=#views class=md-nav__link> <span class=md-ellipsis> Views </span> </a> </li> <li class=md-nav__item> <a href=#components class=md-nav__link> <span class=md-ellipsis> Components </span> </a> <nav class=md-nav aria-label=Components> <ul class=md-nav__list> <li class=md-nav__item> <a href=#acl class=md-nav__link> <span class=md-ellipsis> Acl </span> </a> </li> <li class=md-nav__item> <a href=#auth class=md-nav__link> <span class=md-ellipsis> Auth </span> </a> </li> <li class=md-nav__item> <a href=#mail class=md-nav__link> <span class=md-ellipsis> Mail </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sign-up class=md-nav__link> <span class=md-ellipsis> Sign Up </span> </a> <nav class=md-nav aria-label="Sign Up"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#controller class=md-nav__link> <span class=md-ellipsis> Controller </span> </a> </li> <li class=md-nav__item> <a href=#form class=md-nav__link> <span class=md-ellipsis> Form </span> </a> </li> <li class=md-nav__item> <a href=#view class=md-nav__link> <span class=md-ellipsis> View </span> </a> </li> <li class=md-nav__item> <a href=#post class=md-nav__link> <span class=md-ellipsis> Post </span> </a> </li> <li class=md-nav__item> <a href=#model class=md-nav__link> <span class=md-ellipsis> Model </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> <span class=md-ellipsis> References </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/phalcon/documentation/edit/master/docs/tutorial-vokuro.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <a href=https://github.com/phalcon/documentation/raw/master/docs/tutorial-vokuro.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <h1 id=tutorial-vokuro>Tutorial - Vökuró<a class=headerlink href=#tutorial-vokuro title="Permanent link">&para;</a></h1> <hr> <h2 id=vokuro>Vökuró<a class=headerlink href=#vokuro title="Permanent link">&para;</a></h2> <p><a href=https://github.com/phalcon/vokuro>Vökuró</a> is a sample application, showcasing a typical web application written in Phalcon. This application focuses on: - User Login (security) - User Signup (security) - User Permissions - User management</p> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>You can use Vökuró as a starting point for your application and enhance it further to meet your needs. By no means this is a perfect application, and it does not fit all needs.</p> </div> <div class="admonition warning"> <p class=admonition-title>NOTE</p> <p>This tutorial assumes that you are familiar with the concepts of the Model View Controller design pattern. (see References at the end of this tutorial)</p> </div> <div class="admonition warning"> <p class=admonition-title>NOTE</p> <p>Note the code below has been formatted to increase readability</p> </div> <h2 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">&para;</a></h2> <h3 id=downloading>Downloading<a class=headerlink href=#downloading title="Permanent link">&para;</a></h3> <p>In order to install the application, you can either clone or download it from <a href=https://github.com/phalcon/vokuro>GitHub</a>. You can visit the GitHub page, download the application, and then unzip it to a directory on your machine. Alternatively, you can use <code>git clone</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>git<span class=w> </span>clone<span class=w> </span>https://github.com/phalcon/vokuro
</code></pre></div> <h3 id=extensions>Extensions<a class=headerlink href=#extensions title="Permanent link">&para;</a></h3> <p>There are some prerequisites for the Vökuró to run. You will need to have PHP &gt;= 7.2 installed on your machine and the following extensions: - ctype - curl - dom - json - iconv - mbstring - memcached - opcache - openssl - pdo - pdo_mysql - psr - session - simplexml - xml - xmlwriter</p> <p>Phalcon needs to be installed. Head over to the <a href=../installation/ >installation</a> page if you need help with installing Phalcon.</p> <p>Finally, you will also need to ensure that you have updated the composer packages (see section below).</p> <h3 id=run>Run<a class=headerlink href=#run title="Permanent link">&para;</a></h3> <p>If all the above requirements are satisfied, you can run the application using PHP's built-in web server by issuing the following command on a terminal (in the folder you have extracted the sample):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>php<span class=w> </span>-S<span class=w> </span>localhost:8080<span class=w> </span>-t<span class=w> </span>public/<span class=w> </span>.htrouter.php
</code></pre></div> <p>The above command will start serving the site for <code>localhost</code> at the port <code>8080</code>. You can change those settings to suit your needs. Alternatively, you can set up your site in Apache or nginX using a virtual host. Please consult the relevant documentation on how to set up a virtual host for these web servers.</p> <h3 id=docker>Docker<a class=headerlink href=#docker title="Permanent link">&para;</a></h3> <p>In the <code>resources</code> folder you will find a <code>Dockerfile</code> which allows you to quickly set up the environment and run the application. To use the <code>Dockerfile</code> we need to decide the name of our dockerized application. For the purposes of this tutorial, we will use <code>phalcon-tutorial-vokuro</code>.</p> <p>From the root of the application we need to compile the project (you only need to do this once):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>$<span class=w> </span>docker<span class=w> </span>build<span class=w> </span>-t<span class=w> </span>phalcon-tutorial-vokuro<span class=w> </span>-f<span class=w> </span>docker/Dockerfile<span class=w> </span>.
</code></pre></div> <p>and then run it</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>$<span class=w> </span>docker<span class=w> </span>run<span class=w> </span>-it<span class=w> </span>--rm<span class=w> </span>phalcon-tutorial-vokuro<span class=w> </span>bash
</code></pre></div> <p>This will enter us in the dockerized environment. To check the PHP version:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>root@c7b43060b115:/code<span class=w> </span>$<span class=w> </span>php<span class=w> </span>-v
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>PHP<span class=w> </span><span class=m>8</span>.1.8<span class=w> </span><span class=o>(</span>cli<span class=o>)</span><span class=w> </span><span class=o>(</span>built:<span class=w> </span>Jul<span class=w> </span><span class=m>12</span><span class=w> </span><span class=m>2022</span><span class=w> </span><span class=m>08</span>:28:43<span class=o>)</span><span class=w> </span><span class=o>(</span>NTS<span class=o>)</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>Copyright<span class=w> </span><span class=o>(</span>c<span class=o>)</span><span class=w> </span>The<span class=w> </span>PHP<span class=w> </span>Group
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>Zend<span class=w> </span>Engine<span class=w> </span>v4.1.8,<span class=w> </span>Copyright<span class=w> </span><span class=o>(</span>c<span class=o>)</span><span class=w> </span>Zend<span class=w> </span>Technologies
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span>with<span class=w> </span>Xdebug<span class=w> </span>v3.1.5,<span class=w> </span>Copyright<span class=w> </span><span class=o>(</span>c<span class=o>)</span><span class=w> </span><span class=m>2002</span>-2022,<span class=w> </span>by<span class=w> </span>Derick<span class=w> </span>Rethans
</code></pre></div> <p>and Phalcon:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>root@c7b43060b115:/code<span class=w> </span>$<span class=w> </span>php<span class=w> </span>-r<span class=w> </span><span class=s1>&#39;echo Phalcon\Version::get();&#39;</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=m>4</span>.0.0
</code></pre></div> <p>You now have a dockerized environment with all the necessary components to run Vökuró.</p> <h2 id=structure>Structure<a class=headerlink href=#structure title="Permanent link">&para;</a></h2> <p>Looking at the structure of the application we have the following:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>vokuro/
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span>.ci
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span>configs
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span>db
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>        </span>migrations
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>        </span>seeds
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span>public
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>    </span>resources
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=w>    </span>src
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=w>        </span>Controllers
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=w>        </span>Forms
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=w>        </span>Models
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=w>        </span>Phalcon
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=w>        </span>Plugins
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=w>        </span>Providers
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=w>    </span>tests
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a><span class=w>    </span>themes
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a><span class=w>        </span>vokuro
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=w>    </span>var
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a><span class=w>        </span>cache
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a><span class=w>            </span>acl
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a><span class=w>            </span>metaData
<a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a><span class=w>            </span>session
<a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a><span class=w>            </span>volt
<a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a><span class=w>        </span>logs
<a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a><span class=w>    </span>vendor
</code></pre></div> <table> <thead> <tr> <th>Directory</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>.ci</code></td> <td>Files necessary for setting services for the CI</td> </tr> <tr> <td><code>configs</code></td> <td>Configuration files</td> </tr> <tr> <td><code>db</code></td> <td>Holds the migrations for the database</td> </tr> <tr> <td><code>public</code></td> <td>Entry point for the application, css, js, images</td> </tr> <tr> <td><code>resources</code></td> <td>Docker/nanobox files for setting the application</td> </tr> <tr> <td><code>src</code></td> <td>Where the application lives (controllers, forms, etc.)</td> </tr> <tr> <td><code>src/Controllers</code></td> <td>Controllers</td> </tr> <tr> <td><code>src/Forms</code></td> <td>Forms</td> </tr> <tr> <td><code>src/Models</code></td> <td>Database Models</td> </tr> <tr> <td><code>src/Plugins</code></td> <td>Plugins</td> </tr> <tr> <td><code>src/Providers</code></td> <td>Providers: setting services in the DI container</td> </tr> <tr> <td><code>tests</code></td> <td>Tests</td> </tr> <tr> <td><code>themes</code></td> <td>Themes/views for easy customization</td> </tr> <tr> <td><code>themes/vokuro</code></td> <td>Default theme for the application</td> </tr> <tr> <td><code>var</code></td> <td>Various supporting files</td> </tr> <tr> <td><code>var/cache</code></td> <td>Cache files</td> </tr> <tr> <td><code>var/logs</code></td> <td>Logs</td> </tr> <tr> <td><code>vendor</code></td> <td>Vendor/composer based libraries</td> </tr> </tbody> </table> <h2 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h2> <h3 id=env><code>.env</code><a class=headerlink href=#env title="Permanent link">&para;</a></h3> <p><a href=https://github.com/phalcon/vokuro>Vökuró</a> uses the popular <a href=https://github.com/vlucas/phpdotenv>Dotenv</a> library by Vance Lucas. The library utilizes a <code>.env</code> file located in your root folder, which holds configuration parameters such as the database server host, username, password, etc. There is a <code>.env.example</code> file that comes with Vökuró that you can copy and rename to <code>.env</code> and then edit it to match your environment. You need to do this first so that your application can run properly.</p> <p>The available options are:</p> <table> <thead> <tr> <th>Option</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>APP_CRYPT_SALT</code></td> <td>Random and long string that is used by the <a href=../encryption-crypt/ >Phalcon\Encryption\Crypt</a> component to produce passwords and any additional security features</td> </tr> <tr> <td><code>APP_BASE_URI</code></td> <td>Usually <code>/</code> if your web server points directly to the Vökuró directory. If you have installed Vökuró in a subdirectory, you can adjust the base URI</td> </tr> <tr> <td><code>APP_PUBLIC_URL</code></td> <td>The public URL of the application. This is used for the emails.</td> </tr> <tr> <td><code>DB_ADAPTER</code></td> <td>The database adapter. The available adapters are: <code>mysql</code>, <code>pgsql</code>, <code>sqlite</code>. Please ensure that the relevant extensions for the database are installed in your system.</td> </tr> <tr> <td><code>DB_HOST</code></td> <td>The database host</td> </tr> <tr> <td><code>DB_PORT</code></td> <td>The database port</td> </tr> <tr> <td><code>DB_USERNAME</code></td> <td>The database username</td> </tr> <tr> <td><code>DB_PASSWORD</code></td> <td>The database password</td> </tr> <tr> <td><code>DB_NAME</code></td> <td>The database name</td> </tr> <tr> <td><code>MAIL_FROM_NAME</code></td> <td>The FROM name when sending emails</td> </tr> <tr> <td><code>MAIL_FROM_EMAIL</code></td> <td>The FROM email when sending emails</td> </tr> <tr> <td><code>MAIL_SMTP_SERVER</code></td> <td>The SMTP server</td> </tr> <tr> <td><code>MAIL_SMTP_PORT</code></td> <td>The SMTP port</td> </tr> <tr> <td><code>MAIL_SMTP_SECURITY</code></td> <td>The SMTP security (e.g. <code>tls</code>)</td> </tr> <tr> <td><code>MAIL_SMTP_USERNAME</code></td> <td>The SMTP username</td> </tr> <tr> <td><code>MAIL_SMTP_PASSWORD</code></td> <td>The SMTP password</td> </tr> <tr> <td><code>CODECEPTION_URL</code></td> <td>The Codeception server for tests. If you run the tests locally this should be <code>127.0.0.1</code></td> </tr> <tr> <td><code>CODECEPTION_PORT</code></td> <td>The Codeception port</td> </tr> </tbody> </table> <p>Once the configuration file is in place, visiting the IP address will present a screen similar to this:</p> <p><img alt src=../assets/images/content/tutorial-vokuro-1.png></p> <h3 id=database><code>Database</code><a class=headerlink href=#database title="Permanent link">&para;</a></h3> <p>You also need to initialize the database. <a href=https://github.com/phalcon/vokuro>Vökuró</a> uses the popular library <a href=https://github.com/cakephp/phinx>Phinx</a> by Rob Morgan (now the Cake Foundation). The library uses its own configuration file (<code>phinx.php</code>), but for Vökuró you don't need to adjust any settings since <code>phinx.php</code> reads the <code>.env</code> file to retrieve the configuration settings. This allows you to set your configuration parameters in one place.</p> <p>We will now need to run the migrations. To check the status of our database:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>/app<span class=w> </span>$<span class=w> </span>./vendor/bin/phinx<span class=w> </span>status
</code></pre></div> <p>You will see the following screen:</p> <p><img alt src=../assets/images/content/tutorial-vokuro-2.png></p> <p>To initialize the database we need to run the migrations:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>/app<span class=w> </span>$<span class=w> </span>./vendor/bin/phinx<span class=w> </span>migrate
</code></pre></div> <p>The screen will show the operation:</p> <p><img alt src=../assets/images/content/tutorial-vokuro-3.png></p> <p>And the <code>status</code> command will now show all green:</p> <p><img alt src=../assets/images/content/tutorial-vokuro-4.png></p> <h3 id=config>Config<a class=headerlink href=#config title="Permanent link">&para;</a></h3> <p><strong>acl.php</strong></p> <p>Looking at the <code>config/</code> folder, you will notice four files. There is no need for you to change these files to start the application but if you wish to customize it, this is the place to visit. The <code>acl.php</code> file returns an array of <em>routes</em> that controls which routes are visible to only logged-in users.</p> <p>The current setup will require a user to be logged in if they visit these routes:</p> <ul> <li><code>users/index</code></li> <li><code>users/search</code></li> <li><code>users/edit</code></li> <li><code>users/create</code></li> <li><code>users/delete</code></li> <li><code>users/changePassword</code></li> <li><code>profiles/index</code></li> <li><code>profiles/search</code></li> <li><code>profiles/edit</code></li> <li><code>profiles/create</code></li> <li><code>profiles/delete</code></li> <li><code>permissions/index</code></li> </ul> <p>If you use Vökuró as a starting point for your own application, you will need to modify this file to add or remove routes to ensure that your protected routes are behind the login mechanism.</p> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>Keeping the private routes in an array is efficient and easy to maintain for a small to medium application. Once your application starts growing, you might need to consider a different technique to keep your private routes such as the database with a caching mechanism.</p> </div> <p><strong>config.php</strong></p> <p>This file holds all the configuration parameters that Vökuró needs. Usually, you will not need to change this file, since the elements of the array are set by the <code>.env</code> file and <a href=https://github.com/vlucas/phpdotenv>Dotenv</a>. However, you might want to change the location of your logs or other paths, should you decide to change the directory structure.</p> <p>One of the elements you might want to consider when working with Vökuró on your local machine is the <code>useMail</code> and set it to <code>false</code>. This will instruct Vökuró not to try to connect to a mail server and send an email when a user registers on the site.</p> <p><strong>providers.php</strong></p> <p>This file contains all the providers that Vökuró needs. This is a list of classes in the application, that registers the particular class in the DI container. If you need to register new components to your DI container, you can add them to the array of this file.</p> <p><strong>routes.php</strong></p> <p>This file contains the routes that Vökuró understands. The router already registers the default routes, so any routes defined in <code>routes.php</code> are specific ones. You can add any non-standard routes you need, when customizing Vökuró, in this file. As a reminder, the default routes are:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>/:controller/:action/:parameters
</code></pre></div> <h3 id=providers>Providers<a class=headerlink href=#providers title="Permanent link">&para;</a></h3> <p>As mentioned above, Vökuró uses classes called Providers in order to register services in the DI container. This is just one way to register services in the DI container, nothing stops you from putting all these registrations in a single file.</p> <p>For Vökuró we decided to use one file per service as well as a <code>providers.php</code> (see above) as the registration configuration array for these services. This allows us to have much smaller chunks of code, organized in a separate file per service, as well as an array that allows us to register or unregister/disable a service without removing files. All we need to do is change the <code>providers.php</code> array.</p> <p>The provider classes are located in <code>src/Providers</code>. Each of the provider classes implements the <a href=../api/phalcon_di/#diserviceproviderinterface-->Phalcon\Di\ServiceProviderInterface</a> interface. For more information, see the bootstrapping section below.</p> <h2 id=composer>Composer<a class=headerlink href=#composer title="Permanent link">&para;</a></h2> <p><a href=https://github.com/phalcon/vokuro>Vökuró</a> uses <a href=https://getcomposer.org>composer</a> to download and install supplemental PHP libraries. The libraries used are:</p> <ul> <li><a href=https://github.com/vlucas/phpdotenv>Dotenv</a></li> <li><a href=https://github.com/cakephp/phinx>Phinx</a></li> <li><a href=https://swiftmailer.symfony.com>Swift Mailer</a></li> </ul> <p>Looking at <code>composer.json</code> the required packages are:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>&quot;require&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=nt>&quot;php&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&gt;=8.0&quot;</span><span class=p>,</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class=nt>&quot;ext-openssl&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;*&quot;</span><span class=p>,</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=nt>&quot;ext-phalcon&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;~5.0.0&quot;</span><span class=p>,</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>    </span><span class=nt>&quot;robmorgan/phinx&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;^0.11.1&quot;</span><span class=p>,</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=nt>&quot;swiftmailer/swiftmailer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;^5.4&quot;</span><span class=p>,</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>    </span><span class=nt>&quot;vlucas/phpdotenv&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;^3.4&quot;</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=p>}</span>
</code></pre></div> <p>If this is a fresh installation you can run</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>composer<span class=w> </span>install
</code></pre></div> <p>or if you want to upgrade the existing installations of the above packages:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>composer<span class=w> </span>update
</code></pre></div> <p>For more information about composer, you can visit their <a href=https://getcomposer.org>documentation</a> page.</p> <h2 id=bootstrapping>Bootstrapping<a class=headerlink href=#bootstrapping title="Permanent link">&para;</a></h2> <h3 id=entry>Entry<a class=headerlink href=#entry title="Permanent link">&para;</a></h3> <p>The entry point of our application is <code>public/index.php</code>. This file contains the necessary code that bootstraps the application and runs it. It also serves as a single point of entry to our application, making things much easier for us when we want to trap errors, protect files, etc.</p> <p>Let's look at the code:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=k>use</span> <span class=nx>Vokuro\Application</span> <span class=k>as</span> <span class=nx>VokuroApplication</span><span class=p>;</span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=nb>error_reporting</span><span class=p>(</span><span class=k>E_ALL</span><span class=p>);</span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=nv>$rootPath</span> <span class=o>=</span> <span class=nb>dirname</span><span class=p>(</span><span class=no>__DIR__</span><span class=p>);</span>
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=k>try</span> <span class=p>{</span>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>    <span class=k>require_once</span> <span class=nv>$rootPath</span> <span class=o>.</span> <span class=s1>&#39;/vendor/autoload.php&#39;</span><span class=p>;</span>
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>    <span class=nx>Dotenv\Dotenv</span><span class=o>::</span><span class=na>create</span><span class=p>(</span><span class=nv>$rootPath</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>load</span><span class=p>();</span>
<a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>
<a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>    <span class=k>echo</span> <span class=p>(</span><span class=k>new</span> <span class=nx>VokuroApplication</span><span class=p>(</span><span class=nv>$rootPath</span><span class=p>))</span><span class=o>-&gt;</span><span class=na>run</span><span class=p>();</span>
<a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a><span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>Exception</span> <span class=nv>$e</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>    <span class=k>echo</span> <span class=nv>$e</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>(),</span> <span class=s1>&#39;&lt;br&gt;&#39;</span><span class=p>;</span>
<a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>    <span class=k>echo</span> <span class=nb>nl2br</span><span class=p>(</span><span class=nb>htmlentities</span><span class=p>(</span><span class=nv>$e</span><span class=o>-&gt;</span><span class=na>getTraceAsString</span><span class=p>()));</span>
<a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a><span class=p>}</span>
</code></pre></div> <p>First of all, we ensure that we have full error reporting. You can, of course, change this if you wish, or rework the code where error reporting is controlled by an entry in your <code>.env</code> file.</p> <p>A <code>try</code>/<code>catch</code> block wraps all operations. This ensures that all errors are caught and displayed on screen.</p> <div class="admonition danger"> <p class=admonition-title>NOTE</p> <p>You will need to rework the code to enhance security. Currently, if an error happens with the database, the <code>catch</code> code will echo on screen the database credentials with the exception. This code is intended as a tutorial, not a full-scale production application</p> </div> <p>We ensure that we have access to all the supporting libraries by loading the composer's autoloader. In the <code>composer.json</code> we have also defined the <code>autoload</code> entry, directing the autoloader to load any <code>Vokuro</code> namespaced classes from the <code>src</code> folder.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=nt>&quot;autoload&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span><span class=nt>&quot;psr-4&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>        </span><span class=nt>&quot;Vokuro\\&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;app/&quot;</span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=nt>&quot;files&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>        </span><span class=s2>&quot;app/Helpers.php&quot;</span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>    </span><span class=p>]</span>
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=p>}</span>
</code></pre></div> <p>Then we load the environment variables as defined in our <code>.env</code> file by calling the</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nx>Dotenv\Dotenv</span><span class=o>::</span><span class=na>create</span><span class=p>(</span><span class=nv>$rootPath</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>load</span><span class=p>();</span>
</code></pre></div> <p>Finally, we run our application.</p> <h3 id=application>Application<a class=headerlink href=#application title="Permanent link">&para;</a></h3> <p>All the application logic is wrapped in the <code>Vokuro\Application</code> class. Let's see how this is done:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=k>namespace</span> <span class=nx>Vokuro</span><span class=p>;</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=k>use</span> <span class=nx>Exception</span><span class=p>;</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=k>use</span> <span class=nx>Phalcon\Application\AbstractApplication</span><span class=p>;</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=k>use</span> <span class=nx>Phalcon\Di\DiInterface</span><span class=p>;</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=k>use</span> <span class=nx>Phalcon\Di\FactoryDefault</span><span class=p>;</span>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=k>use</span> <span class=nx>Phalcon\Di\ServiceProviderInterface</span><span class=p>;</span>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Application</span> <span class=k>as</span> <span class=nx>MvcApplication</span><span class=p>;</span>
<a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>
<a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=k>class</span> <span class=nc>Application</span>
<a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=p>{</span>
<a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a>    <span class=k>const</span> <span class=no>APPLICATION_PROVIDER</span> <span class=o>=</span> <span class=s1>&#39;bootstrap&#39;</span><span class=p>;</span>
<a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a>
<a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a>    <span class=sd>/**</span>
<a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=sd>     * @var AbstractApplication</span>
<a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=sd>     */</span>
<a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a>    <span class=k>protected</span> <span class=nv>$app</span><span class=p>;</span>
<a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a>
<a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a>    <span class=sd>/**</span>
<a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a><span class=sd>     * @var DiInterface</span>
<a id=__codelineno-16-24 name=__codelineno-16-24 href=#__codelineno-16-24></a><span class=sd>     */</span>
<a id=__codelineno-16-25 name=__codelineno-16-25 href=#__codelineno-16-25></a>    <span class=k>protected</span> <span class=nv>$di</span><span class=p>;</span>
<a id=__codelineno-16-26 name=__codelineno-16-26 href=#__codelineno-16-26></a>
<a id=__codelineno-16-27 name=__codelineno-16-27 href=#__codelineno-16-27></a>    <span class=sd>/**</span>
<a id=__codelineno-16-28 name=__codelineno-16-28 href=#__codelineno-16-28></a><span class=sd>     * @var string</span>
<a id=__codelineno-16-29 name=__codelineno-16-29 href=#__codelineno-16-29></a><span class=sd>     */</span>
<a id=__codelineno-16-30 name=__codelineno-16-30 href=#__codelineno-16-30></a>    <span class=k>protected</span> <span class=nv>$rootPath</span><span class=p>;</span>
<a id=__codelineno-16-31 name=__codelineno-16-31 href=#__codelineno-16-31></a>
<a id=__codelineno-16-32 name=__codelineno-16-32 href=#__codelineno-16-32></a>    <span class=sd>/**</span>
<a id=__codelineno-16-33 name=__codelineno-16-33 href=#__codelineno-16-33></a><span class=sd>     * @param string $rootPath</span>
<a id=__codelineno-16-34 name=__codelineno-16-34 href=#__codelineno-16-34></a><span class=sd>     *</span>
<a id=__codelineno-16-35 name=__codelineno-16-35 href=#__codelineno-16-35></a><span class=sd>     * @throws Exception</span>
<a id=__codelineno-16-36 name=__codelineno-16-36 href=#__codelineno-16-36></a><span class=sd>     */</span>
<a id=__codelineno-16-37 name=__codelineno-16-37 href=#__codelineno-16-37></a>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__construct</span><span class=p>(</span><span class=nx>string</span> <span class=nv>$rootPath</span><span class=p>)</span>
<a id=__codelineno-16-38 name=__codelineno-16-38 href=#__codelineno-16-38></a>    <span class=p>{</span>
<a id=__codelineno-16-39 name=__codelineno-16-39 href=#__codelineno-16-39></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>di</span>       <span class=o>=</span> <span class=k>new</span> <span class=nx>FactoryDefault</span><span class=p>();</span>
<a id=__codelineno-16-40 name=__codelineno-16-40 href=#__codelineno-16-40></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>app</span>      <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>createApplication</span><span class=p>();</span>
<a id=__codelineno-16-41 name=__codelineno-16-41 href=#__codelineno-16-41></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>rootPath</span> <span class=o>=</span> <span class=nv>$rootPath</span><span class=p>;</span>
<a id=__codelineno-16-42 name=__codelineno-16-42 href=#__codelineno-16-42></a>
<a id=__codelineno-16-43 name=__codelineno-16-43 href=#__codelineno-16-43></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>di</span><span class=o>-&gt;</span><span class=na>setShared</span><span class=p>(</span><span class=nx>self</span><span class=o>::</span><span class=na>APPLICATION_PROVIDER</span><span class=p>,</span> <span class=nv>$this</span><span class=p>);</span>
<a id=__codelineno-16-44 name=__codelineno-16-44 href=#__codelineno-16-44></a>
<a id=__codelineno-16-45 name=__codelineno-16-45 href=#__codelineno-16-45></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>initializeProviders</span><span class=p>();</span>
<a id=__codelineno-16-46 name=__codelineno-16-46 href=#__codelineno-16-46></a>    <span class=p>}</span>
<a id=__codelineno-16-47 name=__codelineno-16-47 href=#__codelineno-16-47></a>
<a id=__codelineno-16-48 name=__codelineno-16-48 href=#__codelineno-16-48></a>    <span class=sd>/**</span>
<a id=__codelineno-16-49 name=__codelineno-16-49 href=#__codelineno-16-49></a><span class=sd>     * @return string</span>
<a id=__codelineno-16-50 name=__codelineno-16-50 href=#__codelineno-16-50></a><span class=sd>     * @throws Exception</span>
<a id=__codelineno-16-51 name=__codelineno-16-51 href=#__codelineno-16-51></a><span class=sd>     */</span>
<a id=__codelineno-16-52 name=__codelineno-16-52 href=#__codelineno-16-52></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>run</span><span class=p>()</span><span class=o>:</span> <span class=nx>string</span>
<a id=__codelineno-16-53 name=__codelineno-16-53 href=#__codelineno-16-53></a>    <span class=p>{</span>
<a id=__codelineno-16-54 name=__codelineno-16-54 href=#__codelineno-16-54></a>        <span class=k>return</span> <span class=p>(</span><span class=nx>string</span><span class=p>)</span> <span class=nv>$this</span>
<a id=__codelineno-16-55 name=__codelineno-16-55 href=#__codelineno-16-55></a>            <span class=o>-&gt;</span><span class=na>app</span>
<a id=__codelineno-16-56 name=__codelineno-16-56 href=#__codelineno-16-56></a>            <span class=o>-&gt;</span><span class=na>handle</span><span class=p>(</span><span class=nv>$_SERVER</span><span class=p>[</span><span class=s1>&#39;REQUEST_URI&#39;</span><span class=p>])</span>
<a id=__codelineno-16-57 name=__codelineno-16-57 href=#__codelineno-16-57></a>            <span class=o>-&gt;</span><span class=na>getContent</span><span class=p>()</span>
<a id=__codelineno-16-58 name=__codelineno-16-58 href=#__codelineno-16-58></a>        <span class=p>;</span>
<a id=__codelineno-16-59 name=__codelineno-16-59 href=#__codelineno-16-59></a>    <span class=p>}</span>
<a id=__codelineno-16-60 name=__codelineno-16-60 href=#__codelineno-16-60></a>
<a id=__codelineno-16-61 name=__codelineno-16-61 href=#__codelineno-16-61></a>    <span class=sd>/**</span>
<a id=__codelineno-16-62 name=__codelineno-16-62 href=#__codelineno-16-62></a><span class=sd>     * @return string</span>
<a id=__codelineno-16-63 name=__codelineno-16-63 href=#__codelineno-16-63></a><span class=sd>     */</span>
<a id=__codelineno-16-64 name=__codelineno-16-64 href=#__codelineno-16-64></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>getRootPath</span><span class=p>()</span><span class=o>:</span> <span class=nx>string</span>
<a id=__codelineno-16-65 name=__codelineno-16-65 href=#__codelineno-16-65></a>    <span class=p>{</span>
<a id=__codelineno-16-66 name=__codelineno-16-66 href=#__codelineno-16-66></a>        <span class=k>return</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>rootPath</span><span class=p>;</span>
<a id=__codelineno-16-67 name=__codelineno-16-67 href=#__codelineno-16-67></a>    <span class=p>}</span>
<a id=__codelineno-16-68 name=__codelineno-16-68 href=#__codelineno-16-68></a>
<a id=__codelineno-16-69 name=__codelineno-16-69 href=#__codelineno-16-69></a>    <span class=sd>/**</span>
<a id=__codelineno-16-70 name=__codelineno-16-70 href=#__codelineno-16-70></a><span class=sd>     * @return AbstractApplication</span>
<a id=__codelineno-16-71 name=__codelineno-16-71 href=#__codelineno-16-71></a><span class=sd>     */</span>
<a id=__codelineno-16-72 name=__codelineno-16-72 href=#__codelineno-16-72></a>    <span class=k>protected</span> <span class=k>function</span> <span class=nf>createApplication</span><span class=p>()</span><span class=o>:</span> <span class=nx>AbstractApplication</span>
<a id=__codelineno-16-73 name=__codelineno-16-73 href=#__codelineno-16-73></a>    <span class=p>{</span>
<a id=__codelineno-16-74 name=__codelineno-16-74 href=#__codelineno-16-74></a>        <span class=k>return</span> <span class=k>new</span> <span class=nx>MvcApplication</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>di</span><span class=p>);</span>
<a id=__codelineno-16-75 name=__codelineno-16-75 href=#__codelineno-16-75></a>    <span class=p>}</span>
<a id=__codelineno-16-76 name=__codelineno-16-76 href=#__codelineno-16-76></a>
<a id=__codelineno-16-77 name=__codelineno-16-77 href=#__codelineno-16-77></a>    <span class=sd>/**</span>
<a id=__codelineno-16-78 name=__codelineno-16-78 href=#__codelineno-16-78></a><span class=sd>     * @throws Exception</span>
<a id=__codelineno-16-79 name=__codelineno-16-79 href=#__codelineno-16-79></a><span class=sd>     */</span>
<a id=__codelineno-16-80 name=__codelineno-16-80 href=#__codelineno-16-80></a>    <span class=k>protected</span> <span class=k>function</span> <span class=nf>initializeProviders</span><span class=p>()</span><span class=o>:</span> <span class=nx>void</span>
<a id=__codelineno-16-81 name=__codelineno-16-81 href=#__codelineno-16-81></a>    <span class=p>{</span>
<a id=__codelineno-16-82 name=__codelineno-16-82 href=#__codelineno-16-82></a>        <span class=nv>$filename</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>rootPath</span> 
<a id=__codelineno-16-83 name=__codelineno-16-83 href=#__codelineno-16-83></a>                 <span class=o>.</span> <span class=s1>&#39;/configs/providers.php&#39;</span><span class=p>;</span>
<a id=__codelineno-16-84 name=__codelineno-16-84 href=#__codelineno-16-84></a>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nb>file_exists</span><span class=p>(</span><span class=nv>$filename</span><span class=p>)</span> <span class=o>||</span> <span class=o>!</span><span class=nb>is_readable</span><span class=p>(</span><span class=nv>$filename</span><span class=p>))</span> <span class=p>{</span>
<a id=__codelineno-16-85 name=__codelineno-16-85 href=#__codelineno-16-85></a>            <span class=k>throw</span> <span class=k>new</span> <span class=nx>Exception</span><span class=p>(</span>
<a id=__codelineno-16-86 name=__codelineno-16-86 href=#__codelineno-16-86></a>                <span class=s1>&#39;File providers.php does not exist or is not readable.&#39;</span>
<a id=__codelineno-16-87 name=__codelineno-16-87 href=#__codelineno-16-87></a>            <span class=p>);</span>
<a id=__codelineno-16-88 name=__codelineno-16-88 href=#__codelineno-16-88></a>        <span class=p>}</span>
<a id=__codelineno-16-89 name=__codelineno-16-89 href=#__codelineno-16-89></a>
<a id=__codelineno-16-90 name=__codelineno-16-90 href=#__codelineno-16-90></a>        <span class=nv>$providers</span> <span class=o>=</span> <span class=k>include_once</span> <span class=nv>$filename</span><span class=p>;</span>
<a id=__codelineno-16-91 name=__codelineno-16-91 href=#__codelineno-16-91></a>        <span class=k>foreach</span> <span class=p>(</span><span class=nv>$providers</span> <span class=k>as</span> <span class=nv>$providerClass</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-16-92 name=__codelineno-16-92 href=#__codelineno-16-92></a>            <span class=sd>/** @var ServiceProviderInterface $provider */</span>
<a id=__codelineno-16-93 name=__codelineno-16-93 href=#__codelineno-16-93></a>            <span class=nv>$provider</span> <span class=o>=</span> <span class=k>new</span> <span class=nv>$providerClass</span><span class=p>;</span>
<a id=__codelineno-16-94 name=__codelineno-16-94 href=#__codelineno-16-94></a>            <span class=nv>$provider</span><span class=o>-&gt;</span><span class=na>register</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>di</span><span class=p>);</span>
<a id=__codelineno-16-95 name=__codelineno-16-95 href=#__codelineno-16-95></a>        <span class=p>}</span>
<a id=__codelineno-16-96 name=__codelineno-16-96 href=#__codelineno-16-96></a>    <span class=p>}</span>
<a id=__codelineno-16-97 name=__codelineno-16-97 href=#__codelineno-16-97></a><span class=p>}</span>
</code></pre></div> <p>The constructor of the class first creates a new DI container and stores it in a local property. We are using the <a href=../di/ >Phalcon\Di\FactoryDefault</a> one, which has a lot of services already registered for us.</p> <p>We then create a new <a href=../application/ >Phalcon\Mvc\Application</a> and store it in a property also. We also store the root path because it is useful throughout the application.</p> <p>We then register this class (the <code>Vokuro\Application</code>) in the Di container using the name <code>bootstrap</code>. This allows us to have access to this class from any part of our application through the Di container.</p> <p>The last thing we do is to register all the providers. Although the <a href=../di/ >Phalcon\Di\FactoryDefault</a> object has a lot of services already registered for us, we still need to register providers that suit the needs of our application. As mentioned above, each provider class implements the <a href=../api/phalcon_di/#diserviceproviderinterface-->Phalcon\Di\ServiceProviderInterface</a> interface, so we can load each class and call the <code>register()</code> method with the Di container to register each service. We therefore first load the configuration array <code>config/providers.php</code> and then loop through the entries and register each provider in turn.</p> <p>The available providers are:</p> <table> <thead> <tr> <th>Provider</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>AclProvider</code></td> <td>Permissions</td> </tr> <tr> <td><code>AuthProvider</code></td> <td>Authentication</td> </tr> <tr> <td><code>ConfigProvider</code></td> <td>Configuration values</td> </tr> <tr> <td><code>CryptProvider</code></td> <td>Encryption</td> </tr> <tr> <td><code>DbProvider</code></td> <td>Database access</td> </tr> <tr> <td><code>DispatcherProvider</code></td> <td>Dispatcher - what controller to call for what URL</td> </tr> <tr> <td><code>FlashProvider</code></td> <td>Flash messages for feedback to the user</td> </tr> <tr> <td><code>LoggerProvider</code></td> <td>Logger for errors and other information</td> </tr> <tr> <td><code>MailProvider</code></td> <td>Mail support</td> </tr> <tr> <td><code>ModelsMetadataProvider</code></td> <td>Metadata for models</td> </tr> <tr> <td><code>RouterProvider</code></td> <td>Routes</td> </tr> <tr> <td><code>SecurityProvider</code></td> <td>Security</td> </tr> <tr> <td><code>SessionBagProvider</code></td> <td>Session data</td> </tr> <tr> <td><code>SessionProvider</code></td> <td>Session data</td> </tr> <tr> <td><code>UrlProvider</code></td> <td>URL handling</td> </tr> <tr> <td><code>ViewProvider</code></td> <td>Views and view engine</td> </tr> </tbody> </table> <p><code>run()</code> will now handle the <code>REQUEST_URI</code>, handle it and return the content back. Internally the application will calculate the route based on the request, and dispatch the relevant controller and view before returning the result of this operation back to the user as a response.</p> <h2 id=database_1>Database<a class=headerlink href=#database_1 title="Permanent link">&para;</a></h2> <p>As mentioned above, Vökuró can be installed with MariaDB/MySQL/Aurora, PostgreSql, or SQLite as the database store. For the purposes of this tutorial, we are using MariaDB. The tables that the application uses are:</p> <table> <thead> <tr> <th>Table</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>email_confirmations</code></td> <td>Email confirmations for registration</td> </tr> <tr> <td><code>failed_logins</code></td> <td>Failed login attempts</td> </tr> <tr> <td><code>password_changes</code></td> <td>When a password was changed and by whom</td> </tr> <tr> <td><code>permissions</code></td> <td>Permission matrix</td> </tr> <tr> <td><code>phinxlog</code></td> <td>Phinx migration table</td> </tr> <tr> <td><code>profiles</code></td> <td>Profile for each user</td> </tr> <tr> <td><code>remember_tokens</code></td> <td><em>Remember Me</em> functionality tokens</td> </tr> <tr> <td><code>reset_passwords</code></td> <td>Reset password tokens table</td> </tr> <tr> <td><code>success_logins</code></td> <td>Successful login attempts</td> </tr> <tr> <td><code>users</code></td> <td>Users</td> </tr> </tbody> </table> <h2 id=models>Models<a class=headerlink href=#models title="Permanent link">&para;</a></h2> <p>Following the <a href=https://en.wikipedia.org/wiki/Model–view–controller>Model-View-Controller</a> pattern, Vökuró has one model per database table (excluding the <code>phinxlog</code>). The models allow us to interact with the database tables in an easy object-oriented manner. The models are located in the <code>/src/Models</code> directory, and each model defines the relevant fields, source table as well as any relationships between the model and others. Some models also implement validation rules to ensure that data is stored properly in the database.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=k>namespace</span> <span class=nx>Vokuro\Models</span><span class=p>;</span>
<a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>
<a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>
<a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=k>class</span> <span class=nc>SuccessLogins</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=p>{</span>
<a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>    <span class=sd>/**</span>
<a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=sd>     * @var integer</span>
<a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=sd>     */</span>
<a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>    <span class=k>public</span> <span class=nv>$id</span><span class=p>;</span>
<a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>
<a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>    <span class=sd>/**</span>
<a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=sd>     * @var integer</span>
<a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=sd>     */</span>
<a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a>    <span class=k>public</span> <span class=nv>$usersId</span><span class=p>;</span>
<a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a>
<a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a>    <span class=sd>/**</span>
<a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a><span class=sd>     * @var string</span>
<a id=__codelineno-17-22 name=__codelineno-17-22 href=#__codelineno-17-22></a><span class=sd>     */</span>
<a id=__codelineno-17-23 name=__codelineno-17-23 href=#__codelineno-17-23></a>    <span class=k>public</span> <span class=nv>$ipAddress</span><span class=p>;</span>
<a id=__codelineno-17-24 name=__codelineno-17-24 href=#__codelineno-17-24></a>
<a id=__codelineno-17-25 name=__codelineno-17-25 href=#__codelineno-17-25></a>    <span class=sd>/**</span>
<a id=__codelineno-17-26 name=__codelineno-17-26 href=#__codelineno-17-26></a><span class=sd>     * @var string</span>
<a id=__codelineno-17-27 name=__codelineno-17-27 href=#__codelineno-17-27></a><span class=sd>     */</span>
<a id=__codelineno-17-28 name=__codelineno-17-28 href=#__codelineno-17-28></a>    <span class=k>public</span> <span class=nv>$userAgent</span><span class=p>;</span>
<a id=__codelineno-17-29 name=__codelineno-17-29 href=#__codelineno-17-29></a>
<a id=__codelineno-17-30 name=__codelineno-17-30 href=#__codelineno-17-30></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-17-31 name=__codelineno-17-31 href=#__codelineno-17-31></a>    <span class=p>{</span>
<a id=__codelineno-17-32 name=__codelineno-17-32 href=#__codelineno-17-32></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-17-33 name=__codelineno-17-33 href=#__codelineno-17-33></a>            <span class=s1>&#39;usersId&#39;</span><span class=p>,</span> 
<a id=__codelineno-17-34 name=__codelineno-17-34 href=#__codelineno-17-34></a>            <span class=nx>Users</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-17-35 name=__codelineno-17-35 href=#__codelineno-17-35></a>            <span class=s1>&#39;id&#39;</span><span class=p>,</span> 
<a id=__codelineno-17-36 name=__codelineno-17-36 href=#__codelineno-17-36></a>            <span class=p>[</span>
<a id=__codelineno-17-37 name=__codelineno-17-37 href=#__codelineno-17-37></a>                <span class=s1>&#39;alias&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;user&#39;</span><span class=p>,</span>
<a id=__codelineno-17-38 name=__codelineno-17-38 href=#__codelineno-17-38></a>            <span class=p>]</span>
<a id=__codelineno-17-39 name=__codelineno-17-39 href=#__codelineno-17-39></a>        <span class=p>);</span>
<a id=__codelineno-17-40 name=__codelineno-17-40 href=#__codelineno-17-40></a>    <span class=p>}</span>
<a id=__codelineno-17-41 name=__codelineno-17-41 href=#__codelineno-17-41></a><span class=p>}</span>
</code></pre></div> <p>In the model above, we have defined all the fields of the table as public properties for easy access:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=k>echo</span> <span class=nv>$successLogin</span><span class=o>-&gt;</span><span class=na>ipAddress</span><span class=p>;</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>NOTE</p> <p>If you notice, the property names map exactly the case (upper/lower) of the field names in the relevant table.</p> </div> <p>In the <code>initialize()</code> method, we also define a relationship between this model and the <code>Users</code> model. We assign the fields (local/remote) as well as an <code>alias</code> for this relationship. We can therefore access the user related to a record of this model as follows:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=k>echo</span> <span class=nv>$successLogin</span><span class=o>-&gt;</span><span class=na>user</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>;</span>
</code></pre></div> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>Feel free to open each model file and identify the relationships between the models. Check our documentation for the difference between various types of relationships</p> </div> <h2 id=controllers>Controllers<a class=headerlink href=#controllers title="Permanent link">&para;</a></h2> <p>Again following the <a href=https://en.wikipedia.org/wiki/Model–view–controller>Model-View-Controller</a> pattern, Vökuró has one controller to handle a specific <em>parent</em> route. This means that the <code>AboutController</code> handles the <code>/about</code> route. All controllers are located in the <code>/src/Cotnrollers</code> directory.</p> <p>The default controller is <code>IndexController</code>. All controller classes have the suffix <code>Controller</code>. Each controller has methods suffixed with <code>Action</code> and the default action is <code>indexAction</code>. Therefore, if you visit the site with just the URL, the <code>IndexController</code> will be called and the <code>indexAction</code> will be executed.</p> <p>After that, unless you have registered specific routes, the default routes (automatically registered) will try to match:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>/profiles/search
</code></pre></div> <p>to</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>/src/Controllers/ProfilesController.php<span class=w> </span>-&gt;<span class=w> </span>searchAction
</code></pre></div> <p>The available controllers, actions, and routes for Vökuró are:</p> <table> <thead> <tr> <th>Controller</th> <th>Action</th> <th>Route</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>About</code></td> <td><code>index</code></td> <td><code>/about</code></td> <td>Shows the <code>about</code> page</td> </tr> <tr> <td><code>Index</code></td> <td><code>index</code></td> <td><code>/</code></td> <td>Default action - home page</td> </tr> <tr> <td><code>Permissions</code></td> <td><code>index</code></td> <td><code>/permissions</code></td> <td>View/change permissions for a profile level</td> </tr> <tr> <td><code>Privacy</code></td> <td><code>index</code></td> <td><code>/privacy</code></td> <td>View the privacy page</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>index</code></td> <td><code>/profiles</code></td> <td>View profiles default page</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>create</code></td> <td><code>/profiles/create</code></td> <td>Create profile</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>delete</code></td> <td><code>/profiles/delete</code></td> <td>Delete profile</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>edit</code></td> <td><code>/profiles/edit</code></td> <td>Edit profile</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>search</code></td> <td><code>/profiles/search</code></td> <td>Search profiles</td> </tr> <tr> <td><code>Session</code></td> <td><code>index</code></td> <td><code>/session</code></td> <td>Session default action</td> </tr> <tr> <td><code>Session</code></td> <td><code>forgotPassword</code></td> <td><code>/session/forgotPassword</code></td> <td>Forget password</td> </tr> <tr> <td><code>Session</code></td> <td><code>login</code></td> <td><code>/session/login</code></td> <td>Login</td> </tr> <tr> <td><code>Session</code></td> <td><code>logout</code></td> <td><code>/session/logout</code></td> <td>Logout</td> </tr> <tr> <td><code>Session</code></td> <td><code>signup</code></td> <td><code>/session/signup</code></td> <td>Signup</td> </tr> <tr> <td><code>Terms</code></td> <td><code>index</code></td> <td><code>/terms</code></td> <td>View the terms page</td> </tr> <tr> <td><code>UserControl</code></td> <td><code>confirmEmail</code></td> <td><code>/confirm</code></td> <td>Confirm email</td> </tr> <tr> <td><code>UserControl</code></td> <td><code>resetPassword</code></td> <td><code>/reset-password</code></td> <td>Reset password</td> </tr> <tr> <td><code>Users</code></td> <td><code>index</code></td> <td><code>/users</code></td> <td>Users default screen</td> </tr> <tr> <td><code>Users</code></td> <td><code>changePassword</code></td> <td><code>/users/changePassword</code></td> <td>Change user password</td> </tr> <tr> <td><code>Users</code></td> <td><code>create</code></td> <td><code>/users/create</code></td> <td>Create user</td> </tr> <tr> <td><code>Users</code></td> <td><code>delete</code></td> <td><code>/users/delete</code></td> <td>Delete user</td> </tr> <tr> <td><code>Users</code></td> <td><code>edit</code></td> <td><code>/users/edit</code></td> <td>Edit user</td> </tr> </tbody> </table> <h2 id=views>Views<a class=headerlink href=#views title="Permanent link">&para;</a></h2> <p>The last element of the <a href=https://en.wikipedia.org/wiki/Model–view–controller>Model-View-Controller</a> pattern is the views. Vökuró uses <a href=../volt/ >Volt</a> as the view engine for its views.</p> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>Generally, one would expect to see a <code>views</code> folder under the <code>/src</code> folder. Vökuró uses a slightly different approach, storing all the view files under <code>/themes/vokuro</code>. </p> </div> <p>The views directory contains directories that map to each controller. Inside each of those directories, <code>.volt</code> files are mapped to each action. So for example the route:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>/profiles/create
</code></pre></div> <p>maps to:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>ProfilesController<span class=w> </span>-&gt;<span class=w> </span>createAction
</code></pre></div> <p>and the view is located:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>/themes/vokuro/profiles/create.volt
</code></pre></div> <p>The available views are:</p> <table> <thead> <tr> <th>Controller</th> <th>Action</th> <th>View</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>About</code></td> <td><code>index</code></td> <td><code>/about/index.volt</code></td> <td>Shows the <code>about</code> page</td> </tr> <tr> <td><code>Index</code></td> <td><code>index</code></td> <td><code>/index/index.volt</code></td> <td>Default action - home page</td> </tr> <tr> <td><code>Permissions</code></td> <td><code>index</code></td> <td><code>/permissions/index.volt</code></td> <td>View/change permissions for a profile level</td> </tr> <tr> <td><code>Privacy</code></td> <td><code>index</code></td> <td><code>/privacy/index.volt</code></td> <td>View the privacy page</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>index</code></td> <td><code>/profiles/index.volt</code></td> <td>View profiles default page</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>create</code></td> <td><code>/profiles/create.volt</code></td> <td>Create profile</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>delete</code></td> <td><code>/profiles/delete.volt</code></td> <td>Delete profile</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>edit</code></td> <td><code>/profiles/edit.volt</code></td> <td>Edit profile</td> </tr> <tr> <td><code>Profiles</code></td> <td><code>search</code></td> <td><code>/profiles/search.volt</code></td> <td>Search profiles</td> </tr> <tr> <td><code>Session</code></td> <td><code>index</code></td> <td><code>/session/index.volt</code></td> <td>Session default action</td> </tr> <tr> <td><code>Session</code></td> <td><code>forgotPassword</code></td> <td><code>/session/forgotPassword.volt</code></td> <td>Forget password</td> </tr> <tr> <td><code>Session</code></td> <td><code>login</code></td> <td><code>/session/login.volt</code></td> <td>Login</td> </tr> <tr> <td><code>Session</code></td> <td><code>logout</code></td> <td><code>/session/logout.volt</code></td> <td>Logout</td> </tr> <tr> <td><code>Session</code></td> <td><code>signup</code></td> <td><code>/session/signup.volt</code></td> <td>Signup</td> </tr> <tr> <td><code>Terms</code></td> <td><code>index</code></td> <td><code>/terms/index.volt</code></td> <td>View the terms page</td> </tr> <tr> <td><code>Users</code></td> <td><code>index</code></td> <td><code>/users/index.volt</code></td> <td>Users default screen</td> </tr> <tr> <td><code>Users</code></td> <td><code>changePassword</code></td> <td><code>/users/changePassword.volt</code></td> <td>Change user password</td> </tr> <tr> <td><code>Users</code></td> <td><code>create</code></td> <td><code>/users/create.volt</code></td> <td>Create user</td> </tr> <tr> <td><code>Users</code></td> <td><code>delete</code></td> <td><code>/users/delete.volt</code></td> <td>Delete user</td> </tr> <tr> <td><code>Users</code></td> <td><code>edit</code></td> <td><code>/users/edit.volt</code></td> <td>Edit user</td> </tr> </tbody> </table> <p>The <code>/index.volt</code> file contains the main layout of the page, including stylesheets, javascript references, etc. The <code>/layouts</code> directory contains different layouts that are used in the application, for instance, a <code>public</code> one if the user is not logged in, and a <code>private</code> one for logged-in users. The individual views are injected into the layouts and constructed on the final page.</p> <h2 id=components>Components<a class=headerlink href=#components title="Permanent link">&para;</a></h2> <p>There are several components that we use in Vökuró, offering functionality throughout the application. All these components are located in the <code>/src/Plugins</code> directory.</p> <h3 id=acl>Acl<a class=headerlink href=#acl title="Permanent link">&para;</a></h3> <p><code>Vokuro\Plugins\Acl\Acl</code> is a component that implements an <a href=../acl/ >Access Control List</a> for our application. The ACL controls which user has access to which resources. You can read more about ACL in our <a href=../acl/ >dedicated page</a>.</p> <p>In this component, We define the resources that are considered <em>private</em>. These are held in an internal array with controller as the key and action as the value, and identify which controller/actions require authentication. It also holds human-readable descriptions for actions used throughout the application.</p> <p>The component exposes the following methods:</p> <table> <thead> <tr> <th>Method</th> <th>Returns</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>getActionDescription($action)</code></td> <td><code>string</code></td> <td>Returns the action description according to its simplified name</td> </tr> <tr> <td><code>getAcl()</code></td> <td><code>ACL object</code></td> <td>Returns the ACL list</td> </tr> <tr> <td><code>getPermissions(Profiles $profile)</code></td> <td><code>array</code></td> <td>Returns the permissions assigned to a profile</td> </tr> <tr> <td><code>getResources()</code></td> <td><code>array</code></td> <td>Returns all the resources and their actions available</td> </tr> <tr> <td><code>isAllowed($profile, $controller, $action)</code></td> <td><code>bool</code></td> <td>Checks if the current profile is allowed to access a resource</td> </tr> <tr> <td><code>isPrivate($controllerName)</code></td> <td><code>bool</code></td> <td>Checks if a controller is private or not</td> </tr> <tr> <td><code>rebuild()</code></td> <td><code>ACL object</code></td> <td>Rebuilds the access list into a file</td> </tr> </tbody> </table> <h3 id=auth>Auth<a class=headerlink href=#auth title="Permanent link">&para;</a></h3> <p><code>Vokuro\Plugins\Auth\Auth</code> is a component that manages authentication and offers identity management in Vökuró.</p> <p>The component exposes the following methods:</p> <table> <thead> <tr> <th>Method</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>check($credentials)</code></td> <td>Checks the user credentials</td> </tr> <tr> <td><code>saveSuccessLogin($user)</code></td> <td>Creates the remember me environment settings for the related cookies and generating tokens</td> </tr> <tr> <td><code>registerUserThrottling($userId)</code></td> <td>Implements login throttling. Reduces the effectiveness of brute force attacks</td> </tr> <tr> <td><code>createRememberEnvironment(Users $user)</code></td> <td>Creates the remember me environment settings the related cookies and generating tokens</td> </tr> <tr> <td><code>hasRememberMe(): bool</code></td> <td>Check if the session has a remember me cookie</td> </tr> <tr> <td><code>loginWithRememberMe(): Response</code></td> <td>Logs in using the information in the cookies</td> </tr> <tr> <td><code>checkUserFlags(Users $user)</code></td> <td>Checks if the user is banned/inactive/suspended</td> </tr> <tr> <td><code>getIdentity(): array / null</code></td> <td>Returns the current identity</td> </tr> <tr> <td><code>getName(): string</code></td> <td>Returns the name of the user</td> </tr> <tr> <td><code>remove()</code></td> <td>Removes the user identity information from session</td> </tr> <tr> <td><code>authUserById($id)</code></td> <td>Authenticates the user by his/her id</td> </tr> <tr> <td><code>getUser(): Users</code></td> <td>Get the entity related to the user in the active identity</td> </tr> <tr> <td><code>findFirstByToken($token): int / null</code></td> <td>Returns the current token user</td> </tr> <tr> <td><code>deleteToken(int $userId)</code></td> <td>Delete the current user token in session</td> </tr> </tbody> </table> <h3 id=mail>Mail<a class=headerlink href=#mail title="Permanent link">&para;</a></h3> <p><code>Vokuro\Plugins\Mail\Mail</code> is a wrapper to <a href=https://swiftmailer.symfony.com>Swift Mailer</a>. It exposes two methods <code>send()</code> and <code>getTemplate()</code> which allow you to get a template from the views and populate it with data. The resulting HTML can then be used in the <code>send()</code> method along with the recipient and other parameters to send the email message.</p> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>Note that this component is used only if <code>useMail</code> is enabled in your <code>.env</code> file. You will also need to ensure that the SMTP server and credentials are valid.</p> </div> <h2 id=sign-up>Sign Up<a class=headerlink href=#sign-up title="Permanent link">&para;</a></h2> <h3 id=controller>Controller<a class=headerlink href=#controller title="Permanent link">&para;</a></h3> <p>In order to access all the areas of Vökuró you need to have an account. Vökuró allows you to sign up to the site by clicking the <code>Create an Account</code> button.</p> <p>What this will do is navigate you to the <code>/session/signup</code> URL, which in turn will call the <code>SessionController</code> and <code>signupAction</code>. Let's have a look at what is going on in the <code>signupAction</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=k>namespace</span> <span class=nx>Vokuro\Controllers</span><span class=p>;</span>
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>
<a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=k>use</span> <span class=nx>Phalcon\Flash\Direct</span><span class=p>;</span>
<a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=k>use</span> <span class=nx>Phalcon\Http\Request</span><span class=p>;</span>
<a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Dispatcher</span><span class=p>;</span>
<a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=k>use</span> <span class=nx>Phalcon\Security</span><span class=p>;</span>
<a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\View</span><span class=p>;</span>
<a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=k>use</span> <span class=nx>Vokuro\Forms\SignUpForm</span><span class=p>;</span>
<a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a><span class=k>use</span> <span class=nx>Vokuro\Models\Users</span><span class=p>;</span>
<a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a>
<a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a><span class=sd>/**</span>
<a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a><span class=sd> * @property Dispatcher $dispatcher</span>
<a id=__codelineno-25-16 name=__codelineno-25-16 href=#__codelineno-25-16></a><span class=sd> * @property Direct     $flash</span>
<a id=__codelineno-25-17 name=__codelineno-25-17 href=#__codelineno-25-17></a><span class=sd> * @property Request    $request</span>
<a id=__codelineno-25-18 name=__codelineno-25-18 href=#__codelineno-25-18></a><span class=sd> * @property Security   $security</span>
<a id=__codelineno-25-19 name=__codelineno-25-19 href=#__codelineno-25-19></a><span class=sd> * @property View       $view</span>
<a id=__codelineno-25-20 name=__codelineno-25-20 href=#__codelineno-25-20></a><span class=sd> */</span>
<a id=__codelineno-25-21 name=__codelineno-25-21 href=#__codelineno-25-21></a><span class=k>class</span> <span class=nc>SessionController</span> <span class=k>extends</span> <span class=nx>ControllerBase</span>
<a id=__codelineno-25-22 name=__codelineno-25-22 href=#__codelineno-25-22></a><span class=p>{</span>
<a id=__codelineno-25-23 name=__codelineno-25-23 href=#__codelineno-25-23></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>signupAction</span><span class=p>()</span>
<a id=__codelineno-25-24 name=__codelineno-25-24 href=#__codelineno-25-24></a>    <span class=p>{</span>
<a id=__codelineno-25-25 name=__codelineno-25-25 href=#__codelineno-25-25></a>        <span class=nv>$form</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>SignUpForm</span><span class=p>();</span>
<a id=__codelineno-25-26 name=__codelineno-25-26 href=#__codelineno-25-26></a>
<a id=__codelineno-25-27 name=__codelineno-25-27 href=#__codelineno-25-27></a>        <span class=c1>// ....</span>
<a id=__codelineno-25-28 name=__codelineno-25-28 href=#__codelineno-25-28></a>
<a id=__codelineno-25-29 name=__codelineno-25-29 href=#__codelineno-25-29></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>view</span><span class=o>-&gt;</span><span class=na>setVar</span><span class=p>(</span><span class=s1>&#39;form&#39;</span><span class=p>,</span> <span class=nv>$form</span><span class=p>);</span>
<a id=__codelineno-25-30 name=__codelineno-25-30 href=#__codelineno-25-30></a>    <span class=p>}</span>
<a id=__codelineno-25-31 name=__codelineno-25-31 href=#__codelineno-25-31></a><span class=p>}</span>
</code></pre></div> <p>The workflow of the application is:</p> <ul> <li>Visit <code>/session/signup</code><ul> <li>Create form, send form to the view, render the form</li> </ul> </li> <li>Submit data (not post)<ul> <li>Form shows again, nothing else happens</li> </ul> </li> <li>Submit data (post)<ul> <li>Errors<ul> <li>Form validators have errors, send the form to the view, render the form (errors will show)</li> </ul> </li> <li>No errors<ul> <li>Data is sanitized</li> <li>New Model created</li> <li>Data saved in the database<ul> <li>Error<ul> <li>Show the message on the screen and refresh the form</li> </ul> </li> <li>Success<ul> <li>Record saved</li> <li>Show confirmation on screen</li> <li>Send email (if applicable)</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> <h3 id=form>Form<a class=headerlink href=#form title="Permanent link">&para;</a></h3> <p>In order to have validation for user-supplied data, we are utilizing the <a href=../forms/ >Phalcon\Forms\Form</a> and <a href=../filter-validation/ >Phalcon\Filter\Validation*</a> classes. These classes allow us to create HTML elements and attach validators to them. The form is then passed to the view, where the actual HTML elements are rendered on the screen.</p> <p>When the user submits information, we send the posted data back to the form and the relevant validators validate the input and return any potential error messages.</p> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>All the forms for Vökuró are located in <code>/src/Forms</code></p> </div> <p>First, we create a <code>SignUpForm</code> object. In that object, we define all the HTML elements we need with their respective validators:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=k>namespace</span> <span class=nx>Vokuro\Forms</span><span class=p>;</span>
<a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>
<a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a><span class=k>use</span> <span class=nx>Phalcon\Forms\Element\Check</span><span class=p>;</span>
<a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=k>use</span> <span class=nx>Phalcon\Forms\Element\Hidden</span><span class=p>;</span>
<a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=k>use</span> <span class=nx>Phalcon\Forms\Element\Password</span><span class=p>;</span>
<a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a><span class=k>use</span> <span class=nx>Phalcon\Forms\Element\Submit</span><span class=p>;</span>
<a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a><span class=k>use</span> <span class=nx>Phalcon\Forms\Element\Text</span><span class=p>;</span>
<a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a><span class=k>use</span> <span class=nx>Phalcon\Forms\Form</span><span class=p>;</span>
<a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a><span class=k>use</span> <span class=nx>Phalcon\Validation\Validator\Confirmation</span><span class=p>;</span>
<a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a><span class=k>use</span> <span class=nx>Phalcon\Validation\Validator\Email</span><span class=p>;</span>
<a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a><span class=k>use</span> <span class=nx>Phalcon\Validation\Validator\Identical</span><span class=p>;</span>
<a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a><span class=k>use</span> <span class=nx>Phalcon\Validation\Validator\PresenceOf</span><span class=p>;</span>
<a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a><span class=k>use</span> <span class=nx>Phalcon\Validation\Validator\StringLength</span><span class=p>;</span>
<a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a>
<a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a><span class=k>class</span> <span class=nc>SignUpForm</span> <span class=k>extends</span> <span class=nx>Form</span>
<a id=__codelineno-26-19 name=__codelineno-26-19 href=#__codelineno-26-19></a><span class=p>{</span>
<a id=__codelineno-26-20 name=__codelineno-26-20 href=#__codelineno-26-20></a>    <span class=sd>/**</span>
<a id=__codelineno-26-21 name=__codelineno-26-21 href=#__codelineno-26-21></a><span class=sd>     * @param string|null $entity</span>
<a id=__codelineno-26-22 name=__codelineno-26-22 href=#__codelineno-26-22></a><span class=sd>     * @param array       $options</span>
<a id=__codelineno-26-23 name=__codelineno-26-23 href=#__codelineno-26-23></a><span class=sd>     */</span>
<a id=__codelineno-26-24 name=__codelineno-26-24 href=#__codelineno-26-24></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>(</span>
<a id=__codelineno-26-25 name=__codelineno-26-25 href=#__codelineno-26-25></a>        <span class=nx>string</span> <span class=nv>$entity</span> <span class=o>=</span> <span class=k>null</span><span class=p>,</span> 
<a id=__codelineno-26-26 name=__codelineno-26-26 href=#__codelineno-26-26></a>        <span class=k>array</span> <span class=nv>$options</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-26-27 name=__codelineno-26-27 href=#__codelineno-26-27></a>    <span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-26-28 name=__codelineno-26-28 href=#__codelineno-26-28></a>        <span class=nv>$name</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Text</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>);</span>
<a id=__codelineno-26-29 name=__codelineno-26-29 href=#__codelineno-26-29></a>        <span class=nv>$name</span><span class=o>-&gt;</span><span class=na>setLabel</span><span class=p>(</span><span class=s1>&#39;Name&#39;</span><span class=p>);</span>
<a id=__codelineno-26-30 name=__codelineno-26-30 href=#__codelineno-26-30></a>        <span class=nv>$name</span><span class=o>-&gt;</span><span class=na>addValidators</span><span class=p>(</span>
<a id=__codelineno-26-31 name=__codelineno-26-31 href=#__codelineno-26-31></a>            <span class=p>[</span>
<a id=__codelineno-26-32 name=__codelineno-26-32 href=#__codelineno-26-32></a>                <span class=k>new</span> <span class=nx>PresenceOf</span><span class=p>(</span>
<a id=__codelineno-26-33 name=__codelineno-26-33 href=#__codelineno-26-33></a>                    <span class=p>[</span>
<a id=__codelineno-26-34 name=__codelineno-26-34 href=#__codelineno-26-34></a>                        <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;The name is required&#39;</span><span class=p>,</span>
<a id=__codelineno-26-35 name=__codelineno-26-35 href=#__codelineno-26-35></a>                    <span class=p>]</span>
<a id=__codelineno-26-36 name=__codelineno-26-36 href=#__codelineno-26-36></a>                <span class=p>),</span>
<a id=__codelineno-26-37 name=__codelineno-26-37 href=#__codelineno-26-37></a>            <span class=p>]</span>
<a id=__codelineno-26-38 name=__codelineno-26-38 href=#__codelineno-26-38></a>        <span class=p>);</span>
<a id=__codelineno-26-39 name=__codelineno-26-39 href=#__codelineno-26-39></a>
<a id=__codelineno-26-40 name=__codelineno-26-40 href=#__codelineno-26-40></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>add</span><span class=p>(</span><span class=nv>$name</span><span class=p>);</span>
<a id=__codelineno-26-41 name=__codelineno-26-41 href=#__codelineno-26-41></a>
<a id=__codelineno-26-42 name=__codelineno-26-42 href=#__codelineno-26-42></a>        <span class=nv>$email</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Text</span><span class=p>(</span><span class=s1>&#39;email&#39;</span><span class=p>);</span>
<a id=__codelineno-26-43 name=__codelineno-26-43 href=#__codelineno-26-43></a>        <span class=nv>$email</span><span class=o>-&gt;</span><span class=na>setLabel</span><span class=p>(</span><span class=s1>&#39;E-Mail&#39;</span><span class=p>);</span>
<a id=__codelineno-26-44 name=__codelineno-26-44 href=#__codelineno-26-44></a>        <span class=nv>$email</span><span class=o>-&gt;</span><span class=na>addValidators</span><span class=p>(</span>
<a id=__codelineno-26-45 name=__codelineno-26-45 href=#__codelineno-26-45></a>            <span class=p>[</span>
<a id=__codelineno-26-46 name=__codelineno-26-46 href=#__codelineno-26-46></a>                <span class=k>new</span> <span class=nx>PresenceOf</span><span class=p>(</span>
<a id=__codelineno-26-47 name=__codelineno-26-47 href=#__codelineno-26-47></a>                    <span class=p>[</span>
<a id=__codelineno-26-48 name=__codelineno-26-48 href=#__codelineno-26-48></a>                        <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;The e-mail is required&#39;</span><span class=p>,</span>
<a id=__codelineno-26-49 name=__codelineno-26-49 href=#__codelineno-26-49></a>                    <span class=p>]</span>
<a id=__codelineno-26-50 name=__codelineno-26-50 href=#__codelineno-26-50></a>                <span class=p>),</span>
<a id=__codelineno-26-51 name=__codelineno-26-51 href=#__codelineno-26-51></a>                <span class=k>new</span> <span class=nx>Email</span><span class=p>(</span>
<a id=__codelineno-26-52 name=__codelineno-26-52 href=#__codelineno-26-52></a>                    <span class=p>[</span>
<a id=__codelineno-26-53 name=__codelineno-26-53 href=#__codelineno-26-53></a>                        <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;The e-mail is not valid&#39;</span><span class=p>,</span>
<a id=__codelineno-26-54 name=__codelineno-26-54 href=#__codelineno-26-54></a>                    <span class=p>]</span>
<a id=__codelineno-26-55 name=__codelineno-26-55 href=#__codelineno-26-55></a>                <span class=p>),</span>
<a id=__codelineno-26-56 name=__codelineno-26-56 href=#__codelineno-26-56></a>            <span class=p>]</span>
<a id=__codelineno-26-57 name=__codelineno-26-57 href=#__codelineno-26-57></a>        <span class=p>);</span>
<a id=__codelineno-26-58 name=__codelineno-26-58 href=#__codelineno-26-58></a>
<a id=__codelineno-26-59 name=__codelineno-26-59 href=#__codelineno-26-59></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>add</span><span class=p>(</span><span class=nv>$email</span><span class=p>);</span>
<a id=__codelineno-26-60 name=__codelineno-26-60 href=#__codelineno-26-60></a>
<a id=__codelineno-26-61 name=__codelineno-26-61 href=#__codelineno-26-61></a>        <span class=nv>$password</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Password</span><span class=p>(</span><span class=s1>&#39;password&#39;</span><span class=p>);</span>
<a id=__codelineno-26-62 name=__codelineno-26-62 href=#__codelineno-26-62></a>        <span class=nv>$password</span><span class=o>-&gt;</span><span class=na>setLabel</span><span class=p>(</span><span class=s1>&#39;Password&#39;</span><span class=p>);</span>
<a id=__codelineno-26-63 name=__codelineno-26-63 href=#__codelineno-26-63></a>        <span class=nv>$password</span><span class=o>-&gt;</span><span class=na>addValidators</span><span class=p>(</span>
<a id=__codelineno-26-64 name=__codelineno-26-64 href=#__codelineno-26-64></a>            <span class=p>[</span>
<a id=__codelineno-26-65 name=__codelineno-26-65 href=#__codelineno-26-65></a>                <span class=k>new</span> <span class=nx>PresenceOf</span><span class=p>(</span>
<a id=__codelineno-26-66 name=__codelineno-26-66 href=#__codelineno-26-66></a>                    <span class=p>[</span>
<a id=__codelineno-26-67 name=__codelineno-26-67 href=#__codelineno-26-67></a>                        <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;The password is required&#39;</span><span class=p>,</span>
<a id=__codelineno-26-68 name=__codelineno-26-68 href=#__codelineno-26-68></a>                    <span class=p>]</span>
<a id=__codelineno-26-69 name=__codelineno-26-69 href=#__codelineno-26-69></a>                <span class=p>),</span>
<a id=__codelineno-26-70 name=__codelineno-26-70 href=#__codelineno-26-70></a>                <span class=k>new</span> <span class=nx>StringLength</span><span class=p>(</span>
<a id=__codelineno-26-71 name=__codelineno-26-71 href=#__codelineno-26-71></a>                    <span class=p>[</span>
<a id=__codelineno-26-72 name=__codelineno-26-72 href=#__codelineno-26-72></a>                        <span class=s1>&#39;min&#39;</span>            <span class=o>=&gt;</span> <span class=mi>8</span><span class=p>,</span>
<a id=__codelineno-26-73 name=__codelineno-26-73 href=#__codelineno-26-73></a>                        <span class=s1>&#39;messageMinimum&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;Password is too short. &#39;</span> <span class=o>.</span>
<a id=__codelineno-26-74 name=__codelineno-26-74 href=#__codelineno-26-74></a>                                            <span class=s1>&#39;Minimum 8 characters&#39;</span><span class=p>,</span>
<a id=__codelineno-26-75 name=__codelineno-26-75 href=#__codelineno-26-75></a>                    <span class=p>]</span>
<a id=__codelineno-26-76 name=__codelineno-26-76 href=#__codelineno-26-76></a>                <span class=p>),</span>
<a id=__codelineno-26-77 name=__codelineno-26-77 href=#__codelineno-26-77></a>                <span class=k>new</span> <span class=nx>Confirmation</span><span class=p>(</span>
<a id=__codelineno-26-78 name=__codelineno-26-78 href=#__codelineno-26-78></a>                    <span class=p>[</span>
<a id=__codelineno-26-79 name=__codelineno-26-79 href=#__codelineno-26-79></a>                        <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s2>&quot;Password doesn&#39;t match &quot;</span> <span class=o>.</span>
<a id=__codelineno-26-80 name=__codelineno-26-80 href=#__codelineno-26-80></a>                                     <span class=s2>&quot;confirmation&quot;</span><span class=p>,</span>
<a id=__codelineno-26-81 name=__codelineno-26-81 href=#__codelineno-26-81></a>                        <span class=s1>&#39;with&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;confirmPassword&#39;</span><span class=p>,</span>
<a id=__codelineno-26-82 name=__codelineno-26-82 href=#__codelineno-26-82></a>                    <span class=p>]</span>
<a id=__codelineno-26-83 name=__codelineno-26-83 href=#__codelineno-26-83></a>                <span class=p>),</span>
<a id=__codelineno-26-84 name=__codelineno-26-84 href=#__codelineno-26-84></a>            <span class=p>]</span>
<a id=__codelineno-26-85 name=__codelineno-26-85 href=#__codelineno-26-85></a>        <span class=p>);</span>
<a id=__codelineno-26-86 name=__codelineno-26-86 href=#__codelineno-26-86></a>
<a id=__codelineno-26-87 name=__codelineno-26-87 href=#__codelineno-26-87></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>add</span><span class=p>(</span><span class=nv>$password</span><span class=p>);</span>
<a id=__codelineno-26-88 name=__codelineno-26-88 href=#__codelineno-26-88></a>
<a id=__codelineno-26-89 name=__codelineno-26-89 href=#__codelineno-26-89></a>        <span class=nv>$confirmPassword</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Password</span><span class=p>(</span><span class=s1>&#39;confirmPassword&#39;</span><span class=p>);</span>
<a id=__codelineno-26-90 name=__codelineno-26-90 href=#__codelineno-26-90></a>        <span class=nv>$confirmPassword</span><span class=o>-&gt;</span><span class=na>setLabel</span><span class=p>(</span><span class=s1>&#39;Confirm Password&#39;</span><span class=p>);</span>
<a id=__codelineno-26-91 name=__codelineno-26-91 href=#__codelineno-26-91></a>        <span class=nv>$confirmPassword</span><span class=o>-&gt;</span><span class=na>addValidators</span><span class=p>(</span>
<a id=__codelineno-26-92 name=__codelineno-26-92 href=#__codelineno-26-92></a>            <span class=p>[</span>
<a id=__codelineno-26-93 name=__codelineno-26-93 href=#__codelineno-26-93></a>                <span class=k>new</span> <span class=nx>PresenceOf</span><span class=p>(</span>
<a id=__codelineno-26-94 name=__codelineno-26-94 href=#__codelineno-26-94></a>                    <span class=p>[</span>
<a id=__codelineno-26-95 name=__codelineno-26-95 href=#__codelineno-26-95></a>                        <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;The confirmation password &#39;</span> <span class=o>.</span>
<a id=__codelineno-26-96 name=__codelineno-26-96 href=#__codelineno-26-96></a>                                     <span class=s1>&#39;is required&#39;</span><span class=p>,</span>
<a id=__codelineno-26-97 name=__codelineno-26-97 href=#__codelineno-26-97></a>                    <span class=p>]</span>
<a id=__codelineno-26-98 name=__codelineno-26-98 href=#__codelineno-26-98></a>                <span class=p>),</span>
<a id=__codelineno-26-99 name=__codelineno-26-99 href=#__codelineno-26-99></a>            <span class=p>]</span>
<a id=__codelineno-26-100 name=__codelineno-26-100 href=#__codelineno-26-100></a>        <span class=p>);</span>
<a id=__codelineno-26-101 name=__codelineno-26-101 href=#__codelineno-26-101></a>
<a id=__codelineno-26-102 name=__codelineno-26-102 href=#__codelineno-26-102></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>add</span><span class=p>(</span><span class=nv>$confirmPassword</span><span class=p>);</span>
<a id=__codelineno-26-103 name=__codelineno-26-103 href=#__codelineno-26-103></a>
<a id=__codelineno-26-104 name=__codelineno-26-104 href=#__codelineno-26-104></a>        <span class=nv>$terms</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Check</span><span class=p>(</span>
<a id=__codelineno-26-105 name=__codelineno-26-105 href=#__codelineno-26-105></a>            <span class=s1>&#39;terms&#39;</span><span class=p>,</span> 
<a id=__codelineno-26-106 name=__codelineno-26-106 href=#__codelineno-26-106></a>            <span class=p>[</span>
<a id=__codelineno-26-107 name=__codelineno-26-107 href=#__codelineno-26-107></a>                <span class=s1>&#39;value&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;yes&#39;</span><span class=p>,</span>
<a id=__codelineno-26-108 name=__codelineno-26-108 href=#__codelineno-26-108></a>            <span class=p>]</span>
<a id=__codelineno-26-109 name=__codelineno-26-109 href=#__codelineno-26-109></a>        <span class=p>);</span>
<a id=__codelineno-26-110 name=__codelineno-26-110 href=#__codelineno-26-110></a>
<a id=__codelineno-26-111 name=__codelineno-26-111 href=#__codelineno-26-111></a>        <span class=nv>$terms</span><span class=o>-&gt;</span><span class=na>setLabel</span><span class=p>(</span><span class=s1>&#39;Accept terms and conditions&#39;</span><span class=p>);</span>
<a id=__codelineno-26-112 name=__codelineno-26-112 href=#__codelineno-26-112></a>        <span class=nv>$terms</span><span class=o>-&gt;</span><span class=na>addValidator</span><span class=p>(</span>
<a id=__codelineno-26-113 name=__codelineno-26-113 href=#__codelineno-26-113></a>            <span class=k>new</span> <span class=nx>Identical</span><span class=p>(</span>
<a id=__codelineno-26-114 name=__codelineno-26-114 href=#__codelineno-26-114></a>                <span class=p>[</span>
<a id=__codelineno-26-115 name=__codelineno-26-115 href=#__codelineno-26-115></a>                    <span class=s1>&#39;value&#39;</span>   <span class=o>=&gt;</span> <span class=s1>&#39;yes&#39;</span><span class=p>,</span>
<a id=__codelineno-26-116 name=__codelineno-26-116 href=#__codelineno-26-116></a>                    <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;Terms and conditions must be &#39;</span> <span class=o>.</span>
<a id=__codelineno-26-117 name=__codelineno-26-117 href=#__codelineno-26-117></a>                                 <span class=s1>&#39;accepted&#39;</span><span class=p>,</span>
<a id=__codelineno-26-118 name=__codelineno-26-118 href=#__codelineno-26-118></a>                <span class=p>]</span>
<a id=__codelineno-26-119 name=__codelineno-26-119 href=#__codelineno-26-119></a>            <span class=p>)</span>
<a id=__codelineno-26-120 name=__codelineno-26-120 href=#__codelineno-26-120></a>        <span class=p>);</span>
<a id=__codelineno-26-121 name=__codelineno-26-121 href=#__codelineno-26-121></a>
<a id=__codelineno-26-122 name=__codelineno-26-122 href=#__codelineno-26-122></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>add</span><span class=p>(</span><span class=nv>$terms</span><span class=p>);</span>
<a id=__codelineno-26-123 name=__codelineno-26-123 href=#__codelineno-26-123></a>
<a id=__codelineno-26-124 name=__codelineno-26-124 href=#__codelineno-26-124></a>        <span class=nv>$csrf</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Hidden</span><span class=p>(</span><span class=s1>&#39;csrf&#39;</span><span class=p>);</span>
<a id=__codelineno-26-125 name=__codelineno-26-125 href=#__codelineno-26-125></a>        <span class=nv>$csrf</span><span class=o>-&gt;</span><span class=na>addValidator</span><span class=p>(</span>
<a id=__codelineno-26-126 name=__codelineno-26-126 href=#__codelineno-26-126></a>            <span class=k>new</span> <span class=nx>Identical</span><span class=p>(</span>
<a id=__codelineno-26-127 name=__codelineno-26-127 href=#__codelineno-26-127></a>                <span class=p>[</span>
<a id=__codelineno-26-128 name=__codelineno-26-128 href=#__codelineno-26-128></a>                    <span class=s1>&#39;value&#39;</span>   <span class=o>=&gt;</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>security</span><span class=o>-&gt;</span><span class=na>getRequestToken</span><span class=p>(),</span>
<a id=__codelineno-26-129 name=__codelineno-26-129 href=#__codelineno-26-129></a>                    <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;CSRF validation failed&#39;</span><span class=p>,</span>
<a id=__codelineno-26-130 name=__codelineno-26-130 href=#__codelineno-26-130></a>                <span class=p>]</span>
<a id=__codelineno-26-131 name=__codelineno-26-131 href=#__codelineno-26-131></a>            <span class=p>)</span>
<a id=__codelineno-26-132 name=__codelineno-26-132 href=#__codelineno-26-132></a>        <span class=p>);</span>
<a id=__codelineno-26-133 name=__codelineno-26-133 href=#__codelineno-26-133></a>        <span class=nv>$csrf</span><span class=o>-&gt;</span><span class=na>clear</span><span class=p>();</span>
<a id=__codelineno-26-134 name=__codelineno-26-134 href=#__codelineno-26-134></a>
<a id=__codelineno-26-135 name=__codelineno-26-135 href=#__codelineno-26-135></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>add</span><span class=p>(</span><span class=nv>$csrf</span><span class=p>);</span>
<a id=__codelineno-26-136 name=__codelineno-26-136 href=#__codelineno-26-136></a>
<a id=__codelineno-26-137 name=__codelineno-26-137 href=#__codelineno-26-137></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>add</span><span class=p>(</span>
<a id=__codelineno-26-138 name=__codelineno-26-138 href=#__codelineno-26-138></a>            <span class=k>new</span> <span class=nx>Submit</span><span class=p>(</span>
<a id=__codelineno-26-139 name=__codelineno-26-139 href=#__codelineno-26-139></a>                <span class=s1>&#39;Sign Up&#39;</span><span class=p>,</span> 
<a id=__codelineno-26-140 name=__codelineno-26-140 href=#__codelineno-26-140></a>                <span class=p>[</span>
<a id=__codelineno-26-141 name=__codelineno-26-141 href=#__codelineno-26-141></a>                    <span class=s1>&#39;class&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;btn btn-success&#39;</span><span class=p>,</span>
<a id=__codelineno-26-142 name=__codelineno-26-142 href=#__codelineno-26-142></a>                <span class=p>]</span>
<a id=__codelineno-26-143 name=__codelineno-26-143 href=#__codelineno-26-143></a>            <span class=p>)</span>
<a id=__codelineno-26-144 name=__codelineno-26-144 href=#__codelineno-26-144></a>        <span class=p>);</span>
<a id=__codelineno-26-145 name=__codelineno-26-145 href=#__codelineno-26-145></a>    <span class=p>}</span>
<a id=__codelineno-26-146 name=__codelineno-26-146 href=#__codelineno-26-146></a>
<a id=__codelineno-26-147 name=__codelineno-26-147 href=#__codelineno-26-147></a>    <span class=sd>/**</span>
<a id=__codelineno-26-148 name=__codelineno-26-148 href=#__codelineno-26-148></a><span class=sd>     * @param string $name</span>
<a id=__codelineno-26-149 name=__codelineno-26-149 href=#__codelineno-26-149></a><span class=sd>     *</span>
<a id=__codelineno-26-150 name=__codelineno-26-150 href=#__codelineno-26-150></a><span class=sd>     * @return string</span>
<a id=__codelineno-26-151 name=__codelineno-26-151 href=#__codelineno-26-151></a><span class=sd>     */</span>
<a id=__codelineno-26-152 name=__codelineno-26-152 href=#__codelineno-26-152></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>messages</span><span class=p>(</span><span class=nx>string</span> <span class=nv>$name</span><span class=p>)</span>
<a id=__codelineno-26-153 name=__codelineno-26-153 href=#__codelineno-26-153></a>    <span class=p>{</span>
<a id=__codelineno-26-154 name=__codelineno-26-154 href=#__codelineno-26-154></a>        <span class=k>if</span> <span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMessagesFor</span><span class=p>(</span><span class=nv>$name</span><span class=p>))</span> <span class=p>{</span>
<a id=__codelineno-26-155 name=__codelineno-26-155 href=#__codelineno-26-155></a>            <span class=k>foreach</span> <span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getMessagesFor</span><span class=p>(</span><span class=nv>$name</span><span class=p>)</span> <span class=k>as</span> <span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-26-156 name=__codelineno-26-156 href=#__codelineno-26-156></a>                <span class=k>return</span> <span class=nv>$message</span><span class=p>;</span>
<a id=__codelineno-26-157 name=__codelineno-26-157 href=#__codelineno-26-157></a>            <span class=p>}</span>
<a id=__codelineno-26-158 name=__codelineno-26-158 href=#__codelineno-26-158></a>        <span class=p>}</span>
<a id=__codelineno-26-159 name=__codelineno-26-159 href=#__codelineno-26-159></a>
<a id=__codelineno-26-160 name=__codelineno-26-160 href=#__codelineno-26-160></a>        <span class=k>return</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
<a id=__codelineno-26-161 name=__codelineno-26-161 href=#__codelineno-26-161></a>    <span class=p>}</span>
<a id=__codelineno-26-162 name=__codelineno-26-162 href=#__codelineno-26-162></a><span class=p>}</span>
</code></pre></div> <p>In the <code>initialize</code> method we are setting up all the HTML elements we need. These elements are:</p> <table> <thead> <tr> <th>Element</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>name</code></td> <td><code>Text</code></td> <td>The name of the user</td> </tr> <tr> <td><code>email</code></td> <td><code>Text</code></td> <td>The email for the account</td> </tr> <tr> <td><code>password</code></td> <td><code>Password</code></td> <td>The password for the account</td> </tr> <tr> <td><code>confirmPassword</code></td> <td><code>Password</code></td> <td>Password confirmation</td> </tr> <tr> <td><code>terms</code></td> <td><code>Check</code></td> <td>Accept the terms checkbox</td> </tr> <tr> <td><code>csrf</code></td> <td><code>Hidden</code></td> <td>CSRF protection element</td> </tr> <tr> <td><code>Sign Up</code></td> <td><code>Submit</code></td> <td>Submit button</td> </tr> </tbody> </table> <p>Adding elements is pretty straightforward:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=nv>$email</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Text</span><span class=p>(</span><span class=s1>&#39;email&#39;</span><span class=p>);</span>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=nv>$email</span><span class=o>-&gt;</span><span class=na>setLabel</span><span class=p>(</span><span class=s1>&#39;E-Mail&#39;</span><span class=p>);</span>
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=nv>$email</span><span class=o>-&gt;</span><span class=na>addValidators</span><span class=p>(</span>
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>    <span class=p>[</span>
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>        <span class=k>new</span> <span class=nx>PresenceOf</span><span class=p>(</span>
<a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>            <span class=p>[</span>
<a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>                <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;The e-mail is required&#39;</span><span class=p>,</span>
<a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>            <span class=p>]</span>
<a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a>        <span class=p>),</span>
<a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a>        <span class=k>new</span> <span class=nx>Email</span><span class=p>(</span>
<a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>            <span class=p>[</span>
<a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a>                <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;The e-mail is not valid&#39;</span><span class=p>,</span>
<a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a>            <span class=p>]</span>
<a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a>        <span class=p>),</span>
<a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a>    <span class=p>]</span>
<a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a><span class=p>);</span>
<a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a>
<a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>add</span><span class=p>(</span><span class=nv>$email</span><span class=p>);</span>
</code></pre></div> <p>First, we create a <code>Text</code> object and set its name to <code>email</code>. We also set the label of the element to <code>E-Mail</code>. After that, we attach various validators to the element. These will be invoked after the user submits data, and that data is passed in the form.</p> <p>As we see above, we attach the <code>PresenceOf</code> validator on the <code>email</code> element with the message <code>The e-mail is required</code>. The validator will check if the user has submitted data when they click the submit button and will produce the message if the validator fails. The validator checks the passed array (usually <code>$_POST</code>) and for this particular element it will check <code>$_POST['email']</code>.</p> <p>We also attach the <code>Email</code> validator, which is responsible for checking for a valid email address. As you can see the validators belong in an array, so you can easily attach as many validators as you need on any particular element.</p> <p>The last thing we do is to add the element in the form.</p> <p>You will notice that the <code>terms</code> element does not have any validators attached to it, so our form will not check the contents of the element.</p> <p>Special attention to the <code>password</code> and <code>confirmPassword</code> elements. You will notice that both elements are of type <code>Password</code>. The idea is that you need to type your password twice, and the passwords need to match in order to avoid errors.</p> <p>The <code>password</code> field has two validators for content: <code>PresenceOf</code> i.e. it is required and <code>StringLength</code>: where we need the password to be more than 8 characters. We also attach a third validator called <code>Confirmation</code>. This special validator ties the <code>password</code> element with the <code>confirmPassword</code> element. When it is triggered to validate it will check the contents of both elements and if they are not identical, the error message will appear i.e. the validation will fail.</p> <h3 id=view>View<a class=headerlink href=#view title="Permanent link">&para;</a></h3> <p>Now that we have everything set up in our form, we pass the form to the view:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>view</span><span class=o>-&gt;</span><span class=na>setVar</span><span class=p>(</span><span class=s1>&#39;form&#39;</span><span class=p>,</span> <span class=nv>$form</span><span class=p>);</span>
</code></pre></div> <p>Our view now needs to <em>render</em> the elements:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c>{# ... #}</span>
<a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=cp>{%</span> 
<a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>    <span class=k>set</span> <span class=nv>isEmailValidClass</span> <span class=o>=</span> <span class=nv>form.messages</span><span class=o>(</span><span class=s1>&#39;email&#39;</span><span class=o>)</span> <span class=o>?</span> 
<a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>        <span class=s1>&#39;form-control is-invalid&#39;</span> <span class=o>:</span> 
<a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>        <span class=s1>&#39;form-control&#39;</span> 
<a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=cp>%}</span>
<a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=c>{# ... #}</span>
<a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>
<a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=x>&lt;h1 class=&quot;mt-3&quot;&gt;Sign Up&lt;/h1&gt;</span>
<a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a>
<a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a><span class=x>&lt;form method=&quot;post&quot;&gt;</span>
<a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=x>    </span><span class=c>{# ... #}</span>
<a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a>
<a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a><span class=x>    &lt;div class=&quot;form-group row&quot;&gt;</span>
<a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a><span class=x>        </span><span class=cp>{{</span> 
<a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a>            <span class=nv>form.label</span><span class=o>(</span>
<a id=__codelineno-29-17 name=__codelineno-29-17 href=#__codelineno-29-17></a>                <span class=s1>&#39;email&#39;</span><span class=o>,</span> 
<a id=__codelineno-29-18 name=__codelineno-29-18 href=#__codelineno-29-18></a>                <span class=o>[</span>
<a id=__codelineno-29-19 name=__codelineno-29-19 href=#__codelineno-29-19></a>                    <span class=s1>&#39;class&#39;</span><span class=o>:</span> <span class=s1>&#39;col-sm-2 col-form-label&#39;</span>
<a id=__codelineno-29-20 name=__codelineno-29-20 href=#__codelineno-29-20></a>                <span class=o>]</span>
<a id=__codelineno-29-21 name=__codelineno-29-21 href=#__codelineno-29-21></a>            <span class=o>)</span> 
<a id=__codelineno-29-22 name=__codelineno-29-22 href=#__codelineno-29-22></a>        <span class=cp>}}</span>
<a id=__codelineno-29-23 name=__codelineno-29-23 href=#__codelineno-29-23></a><span class=x>        &lt;div class=&quot;col-sm-10&quot;&gt;</span>
<a id=__codelineno-29-24 name=__codelineno-29-24 href=#__codelineno-29-24></a><span class=x>            </span><span class=cp>{{</span> 
<a id=__codelineno-29-25 name=__codelineno-29-25 href=#__codelineno-29-25></a>                <span class=nv>form.render</span><span class=o>(</span>
<a id=__codelineno-29-26 name=__codelineno-29-26 href=#__codelineno-29-26></a>                    <span class=s1>&#39;email&#39;</span><span class=o>,</span> 
<a id=__codelineno-29-27 name=__codelineno-29-27 href=#__codelineno-29-27></a>                    <span class=o>[</span>
<a id=__codelineno-29-28 name=__codelineno-29-28 href=#__codelineno-29-28></a>                        <span class=s1>&#39;class&#39;</span><span class=o>:</span> <span class=nv>isEmailValidClass</span><span class=o>,</span> 
<a id=__codelineno-29-29 name=__codelineno-29-29 href=#__codelineno-29-29></a>                        <span class=s1>&#39;placeholder&#39;</span><span class=o>:</span> <span class=s1>&#39;Email&#39;</span>
<a id=__codelineno-29-30 name=__codelineno-29-30 href=#__codelineno-29-30></a>                    <span class=o>]</span>
<a id=__codelineno-29-31 name=__codelineno-29-31 href=#__codelineno-29-31></a>                <span class=o>)</span> 
<a id=__codelineno-29-32 name=__codelineno-29-32 href=#__codelineno-29-32></a>            <span class=cp>}}</span>
<a id=__codelineno-29-33 name=__codelineno-29-33 href=#__codelineno-29-33></a><span class=x>            &lt;div class=&quot;invalid-feedback&quot;&gt;</span>
<a id=__codelineno-29-34 name=__codelineno-29-34 href=#__codelineno-29-34></a><span class=x>                </span><span class=cp>{{</span> <span class=nv>form.messages</span><span class=o>(</span><span class=s1>&#39;email&#39;</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-29-35 name=__codelineno-29-35 href=#__codelineno-29-35></a><span class=x>            &lt;/div&gt;</span>
<a id=__codelineno-29-36 name=__codelineno-29-36 href=#__codelineno-29-36></a><span class=x>        &lt;/div&gt;</span>
<a id=__codelineno-29-37 name=__codelineno-29-37 href=#__codelineno-29-37></a><span class=x>    &lt;/div&gt;</span>
<a id=__codelineno-29-38 name=__codelineno-29-38 href=#__codelineno-29-38></a>
<a id=__codelineno-29-39 name=__codelineno-29-39 href=#__codelineno-29-39></a><span class=x>    </span><span class=c>{# ... #}</span>
<a id=__codelineno-29-40 name=__codelineno-29-40 href=#__codelineno-29-40></a><span class=x>    &lt;div class=&quot;form-group row&quot;&gt;</span>
<a id=__codelineno-29-41 name=__codelineno-29-41 href=#__codelineno-29-41></a><span class=x>        &lt;div class=&quot;col-sm-10&quot;&gt;</span>
<a id=__codelineno-29-42 name=__codelineno-29-42 href=#__codelineno-29-42></a><span class=x>            </span><span class=cp>{{</span> 
<a id=__codelineno-29-43 name=__codelineno-29-43 href=#__codelineno-29-43></a>                <span class=nv>form.render</span><span class=o>(</span>
<a id=__codelineno-29-44 name=__codelineno-29-44 href=#__codelineno-29-44></a>                    <span class=s1>&#39;csrf&#39;</span><span class=o>,</span> 
<a id=__codelineno-29-45 name=__codelineno-29-45 href=#__codelineno-29-45></a>                    <span class=o>[</span>
<a id=__codelineno-29-46 name=__codelineno-29-46 href=#__codelineno-29-46></a>                        <span class=s1>&#39;value&#39;</span><span class=o>:</span> <span class=nv>security.getToken</span><span class=o>()</span>
<a id=__codelineno-29-47 name=__codelineno-29-47 href=#__codelineno-29-47></a>                    <span class=o>]</span>
<a id=__codelineno-29-48 name=__codelineno-29-48 href=#__codelineno-29-48></a>                <span class=o>)</span> 
<a id=__codelineno-29-49 name=__codelineno-29-49 href=#__codelineno-29-49></a>            <span class=cp>}}</span>
<a id=__codelineno-29-50 name=__codelineno-29-50 href=#__codelineno-29-50></a><span class=x>            </span><span class=cp>{{</span> <span class=nv>form.messages</span><span class=o>(</span><span class=s1>&#39;csrf&#39;</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-29-51 name=__codelineno-29-51 href=#__codelineno-29-51></a>
<a id=__codelineno-29-52 name=__codelineno-29-52 href=#__codelineno-29-52></a><span class=x>            </span><span class=cp>{{</span> <span class=nv>form.render</span><span class=o>(</span><span class=s1>&#39;Sign Up&#39;</span><span class=o>)</span> <span class=cp>}}</span>
<a id=__codelineno-29-53 name=__codelineno-29-53 href=#__codelineno-29-53></a><span class=x>        &lt;/div&gt;</span>
<a id=__codelineno-29-54 name=__codelineno-29-54 href=#__codelineno-29-54></a><span class=x>    &lt;/div&gt;</span>
<a id=__codelineno-29-55 name=__codelineno-29-55 href=#__codelineno-29-55></a><span class=x>&lt;/form&gt;</span>
<a id=__codelineno-29-56 name=__codelineno-29-56 href=#__codelineno-29-56></a>
<a id=__codelineno-29-57 name=__codelineno-29-57 href=#__codelineno-29-57></a><span class=x>&lt;hr&gt;</span>
<a id=__codelineno-29-58 name=__codelineno-29-58 href=#__codelineno-29-58></a>
<a id=__codelineno-29-59 name=__codelineno-29-59 href=#__codelineno-29-59></a><span class=cp>{{</span> <span class=nv>link_to</span><span class=o>(</span><span class=s1>&#39;session/login&#39;</span><span class=o>,</span> <span class=s2>&quot;&amp;larr; Back to Login&quot;</span><span class=o>)</span> <span class=cp>}}</span>
</code></pre></div> <p>The variable that we set in our view for our <code>SignUpForm</code> object is called <code>form</code>. We therefore use it directly and call the methods of it. The syntax in Volt is slightly different. In PHP, we would use <code>$form-&gt;render()</code> whereas in Volt we will use <code>form.render()</code>.</p> <p>The view contains a conditional at the top, checking whether there have been any errors in our form, and if there were, it attaches the <code>is-invalid</code> CSS class to the element. This class puts a nice red border by the element, highlighting the error and showing the message.</p> <p>After that, we have regular HTML tags with the relevant styling. In order to display the HTML code of each element we need to call <code>render()</code> on the <code>form</code> with the relevant element name. Also note that we also call <code>form.label()</code> with the same element name, so that we can create respective <code>&lt;label&gt;</code> tags.</p> <p>At the end of the view we render the <code>CSRF</code> hidden field as well as the submit button <code>Sign Up</code>.</p> <h3 id=post>Post<a class=headerlink href=#post title="Permanent link">&para;</a></h3> <p>As mentioned above, once the user fills out the form and clicks the <code>Sign Up</code> button, the form will <em>self post</em> i.e. it will post the data on the same controller and action (in our case <code>/session/signup</code>). The action now needs to process this posted data:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>
<a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=k>namespace</span> <span class=nx>Vokuro\Controllers</span><span class=p>;</span>
<a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>
<a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=k>use</span> <span class=nx>Phalcon\Flash\Direct</span><span class=p>;</span>
<a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=k>use</span> <span class=nx>Phalcon\Http\Request</span><span class=p>;</span>
<a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Dispatcher</span><span class=p>;</span>
<a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=k>use</span> <span class=nx>Phalcon\Security</span><span class=p>;</span>
<a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\View</span><span class=p>;</span>
<a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=k>use</span> <span class=nx>Vokuro\Forms\SignUpForm</span><span class=p>;</span>
<a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a><span class=k>use</span> <span class=nx>Vokuro\Models\Users</span><span class=p>;</span>
<a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a>
<a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a><span class=sd>/**</span>
<a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a><span class=sd> * @property Dispatcher $dispatcher</span>
<a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a><span class=sd> * @property Direct     $flash</span>
<a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a><span class=sd> * @property Request    $request</span>
<a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a><span class=sd> * @property Security   $security</span>
<a id=__codelineno-30-19 name=__codelineno-30-19 href=#__codelineno-30-19></a><span class=sd> * @property View       $view</span>
<a id=__codelineno-30-20 name=__codelineno-30-20 href=#__codelineno-30-20></a><span class=sd> */</span>
<a id=__codelineno-30-21 name=__codelineno-30-21 href=#__codelineno-30-21></a><span class=k>class</span> <span class=nc>SessionController</span> <span class=k>extends</span> <span class=nx>ControllerBase</span>
<a id=__codelineno-30-22 name=__codelineno-30-22 href=#__codelineno-30-22></a><span class=p>{</span>
<a id=__codelineno-30-23 name=__codelineno-30-23 href=#__codelineno-30-23></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>signupAction</span><span class=p>()</span>
<a id=__codelineno-30-24 name=__codelineno-30-24 href=#__codelineno-30-24></a>    <span class=p>{</span>
<a id=__codelineno-30-25 name=__codelineno-30-25 href=#__codelineno-30-25></a>        <span class=nv>$form</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>SignUpForm</span><span class=p>();</span>
<a id=__codelineno-30-26 name=__codelineno-30-26 href=#__codelineno-30-26></a>
<a id=__codelineno-30-27 name=__codelineno-30-27 href=#__codelineno-30-27></a>        <span class=k>if</span> <span class=p>(</span><span class=k>true</span> <span class=o>===</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>request</span><span class=o>-&gt;</span><span class=na>isPost</span><span class=p>())</span> <span class=p>{</span>
<a id=__codelineno-30-28 name=__codelineno-30-28 href=#__codelineno-30-28></a>            <span class=k>if</span> <span class=p>(</span><span class=k>false</span> <span class=o>!==</span> <span class=nv>$form</span><span class=o>-&gt;</span><span class=na>isValid</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>request</span><span class=o>-&gt;</span><span class=na>getPost</span><span class=p>()))</span> <span class=p>{</span>
<a id=__codelineno-30-29 name=__codelineno-30-29 href=#__codelineno-30-29></a>                <span class=nv>$name</span>     <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-30-30 name=__codelineno-30-30 href=#__codelineno-30-30></a>                    <span class=o>-&gt;</span><span class=na>request</span>
<a id=__codelineno-30-31 name=__codelineno-30-31 href=#__codelineno-30-31></a>                    <span class=o>-&gt;</span><span class=na>getPost</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;striptags&#39;</span><span class=p>)</span>
<a id=__codelineno-30-32 name=__codelineno-30-32 href=#__codelineno-30-32></a>                <span class=p>;</span>
<a id=__codelineno-30-33 name=__codelineno-30-33 href=#__codelineno-30-33></a>                <span class=nv>$email</span>    <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-30-34 name=__codelineno-30-34 href=#__codelineno-30-34></a>                    <span class=o>-&gt;</span><span class=na>request</span>
<a id=__codelineno-30-35 name=__codelineno-30-35 href=#__codelineno-30-35></a>                    <span class=o>-&gt;</span><span class=na>getPost</span><span class=p>(</span><span class=s1>&#39;email&#39;</span><span class=p>)</span>
<a id=__codelineno-30-36 name=__codelineno-30-36 href=#__codelineno-30-36></a>                <span class=p>;</span>
<a id=__codelineno-30-37 name=__codelineno-30-37 href=#__codelineno-30-37></a>                <span class=nv>$password</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-30-38 name=__codelineno-30-38 href=#__codelineno-30-38></a>                    <span class=o>-&gt;</span><span class=na>request</span>
<a id=__codelineno-30-39 name=__codelineno-30-39 href=#__codelineno-30-39></a>                    <span class=o>-&gt;</span><span class=na>getPost</span><span class=p>(</span><span class=s1>&#39;password&#39;</span><span class=p>)</span>
<a id=__codelineno-30-40 name=__codelineno-30-40 href=#__codelineno-30-40></a>                <span class=p>;</span>
<a id=__codelineno-30-41 name=__codelineno-30-41 href=#__codelineno-30-41></a>                <span class=nv>$password</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-30-42 name=__codelineno-30-42 href=#__codelineno-30-42></a>                    <span class=o>-&gt;</span><span class=na>security</span>
<a id=__codelineno-30-43 name=__codelineno-30-43 href=#__codelineno-30-43></a>                    <span class=o>-&gt;</span><span class=na>hash</span><span class=p>(</span><span class=nv>$password</span><span class=p>)</span>
<a id=__codelineno-30-44 name=__codelineno-30-44 href=#__codelineno-30-44></a>                <span class=p>;</span>
<a id=__codelineno-30-45 name=__codelineno-30-45 href=#__codelineno-30-45></a>
<a id=__codelineno-30-46 name=__codelineno-30-46 href=#__codelineno-30-46></a>                <span class=nv>$user</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Users</span><span class=p>(</span>
<a id=__codelineno-30-47 name=__codelineno-30-47 href=#__codelineno-30-47></a>                    <span class=p>[</span>
<a id=__codelineno-30-48 name=__codelineno-30-48 href=#__codelineno-30-48></a>                        <span class=s1>&#39;name&#39;</span>       <span class=o>=&gt;</span> <span class=nv>$name</span><span class=p>,</span>
<a id=__codelineno-30-49 name=__codelineno-30-49 href=#__codelineno-30-49></a>                        <span class=s1>&#39;email&#39;</span>      <span class=o>=&gt;</span> <span class=nv>$email</span><span class=p>,</span>
<a id=__codelineno-30-50 name=__codelineno-30-50 href=#__codelineno-30-50></a>                        <span class=s1>&#39;password&#39;</span>   <span class=o>=&gt;</span> <span class=nv>$password</span><span class=p>,</span>
<a id=__codelineno-30-51 name=__codelineno-30-51 href=#__codelineno-30-51></a>                        <span class=s1>&#39;profilesId&#39;</span> <span class=o>=&gt;</span> <span class=mi>2</span><span class=p>,</span>
<a id=__codelineno-30-52 name=__codelineno-30-52 href=#__codelineno-30-52></a>                    <span class=p>]</span>
<a id=__codelineno-30-53 name=__codelineno-30-53 href=#__codelineno-30-53></a>                <span class=p>);</span>
<a id=__codelineno-30-54 name=__codelineno-30-54 href=#__codelineno-30-54></a>
<a id=__codelineno-30-55 name=__codelineno-30-55 href=#__codelineno-30-55></a>                <span class=k>if</span> <span class=p>(</span><span class=nv>$user</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>())</span> <span class=p>{</span>
<a id=__codelineno-30-56 name=__codelineno-30-56 href=#__codelineno-30-56></a>                    <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>dispatcher</span><span class=o>-&gt;</span><span class=na>forward</span><span class=p>([</span>
<a id=__codelineno-30-57 name=__codelineno-30-57 href=#__codelineno-30-57></a>                        <span class=s1>&#39;controller&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;index&#39;</span><span class=p>,</span>
<a id=__codelineno-30-58 name=__codelineno-30-58 href=#__codelineno-30-58></a>                        <span class=s1>&#39;action&#39;</span>     <span class=o>=&gt;</span> <span class=s1>&#39;index&#39;</span><span class=p>,</span>
<a id=__codelineno-30-59 name=__codelineno-30-59 href=#__codelineno-30-59></a>                    <span class=p>]);</span>
<a id=__codelineno-30-60 name=__codelineno-30-60 href=#__codelineno-30-60></a>                <span class=p>}</span>
<a id=__codelineno-30-61 name=__codelineno-30-61 href=#__codelineno-30-61></a>
<a id=__codelineno-30-62 name=__codelineno-30-62 href=#__codelineno-30-62></a>                <span class=k>foreach</span> <span class=p>(</span><span class=nv>$user</span><span class=o>-&gt;</span><span class=na>getMessages</span><span class=p>()</span> <span class=k>as</span> <span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-30-63 name=__codelineno-30-63 href=#__codelineno-30-63></a>                    <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>flash</span><span class=o>-&gt;</span><span class=na>error</span><span class=p>((</span><span class=nx>string</span><span class=p>)</span> <span class=nv>$message</span><span class=p>);</span>
<a id=__codelineno-30-64 name=__codelineno-30-64 href=#__codelineno-30-64></a>                <span class=p>}</span>
<a id=__codelineno-30-65 name=__codelineno-30-65 href=#__codelineno-30-65></a>            <span class=p>}</span>
<a id=__codelineno-30-66 name=__codelineno-30-66 href=#__codelineno-30-66></a>        <span class=p>}</span>
<a id=__codelineno-30-67 name=__codelineno-30-67 href=#__codelineno-30-67></a>
<a id=__codelineno-30-68 name=__codelineno-30-68 href=#__codelineno-30-68></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>view</span><span class=o>-&gt;</span><span class=na>setVar</span><span class=p>(</span><span class=s1>&#39;form&#39;</span><span class=p>,</span> <span class=nv>$form</span><span class=p>);</span>
<a id=__codelineno-30-69 name=__codelineno-30-69 href=#__codelineno-30-69></a>    <span class=p>}</span>
<a id=__codelineno-30-70 name=__codelineno-30-70 href=#__codelineno-30-70></a><span class=p>}</span>
</code></pre></div> <p>If the user has submitted data, the following line will evaluate, and we will be executing code inside the <code>if</code> statement:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=k>if</span> <span class=p>(</span><span class=k>true</span> <span class=o>===</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>request</span><span class=o>-&gt;</span><span class=na>isPost</span><span class=p>())</span> <span class=p>{</span>
</code></pre></div> <p>Here we are checking the request that came from the user, if it is a <code>POST</code>. Now that it is, we need to use the form validators and check if we have any errors. The [Phalcon\Http\Request][request] object, allows us to get that data easily by using:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>request</span><span class=o>-&gt;</span><span class=na>getPost</span><span class=p>()</span>
</code></pre></div> <p>We now need to pass this posted data in the form and call <code>isValid</code>. This will fire all the validators for each element and if any of them fail, the form will populate the internal messages collection and return <code>false</code></p> <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=k>if</span> <span class=p>(</span><span class=k>false</span> <span class=o>!==</span> <span class=nv>$form</span><span class=o>-&gt;</span><span class=na>isValid</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>request</span><span class=o>-&gt;</span><span class=na>getPost</span><span class=p>()))</span> <span class=p>{</span>
</code></pre></div> <p>If everything is fine, we use again the [Phalcon\Http\Request][request] object to retrieve the submitted data but also sanitize them. The following example strips the tags from the submitted <code>name</code> string:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=nv>$name</span>     <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>    <span class=o>-&gt;</span><span class=na>request</span>
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a>    <span class=o>-&gt;</span><span class=na>getPost</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;striptags&#39;</span><span class=p>)</span>
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=p>;</span>
</code></pre></div> <p>Note that we never store clear text passwords. Instead, we use the <a href=../encryption-security/ >Phalcon\Encryption\Security</a> component and call <code>hash</code> on it, to transform the supplied password to a one-way hash and store that instead. This way, if someone compromises our database, at least they have no access to clear text passwords.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=nv>$password</span> <span class=o>=</span> <span class=nv>$this</span>
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>    <span class=o>-&gt;</span><span class=na>security</span>
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>    <span class=o>-&gt;</span><span class=na>hash</span><span class=p>(</span><span class=nv>$password</span><span class=p>)</span>
<a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=p>;</span>
</code></pre></div> <p>We now need to store the supplied data in the database. We do that by creating a new <code>Users</code> model, passing the sanitized data into it, and then calling <code>save</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=nv>$user</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Users</span><span class=p>(</span>
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>    <span class=p>[</span>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>        <span class=s1>&#39;name&#39;</span>       <span class=o>=&gt;</span> <span class=nv>$name</span><span class=p>,</span>
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a>        <span class=s1>&#39;email&#39;</span>      <span class=o>=&gt;</span> <span class=nv>$email</span><span class=p>,</span>
<a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>        <span class=s1>&#39;password&#39;</span>   <span class=o>=&gt;</span> <span class=nv>$password</span><span class=p>,</span>
<a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a>        <span class=s1>&#39;profilesId&#39;</span> <span class=o>=&gt;</span> <span class=mi>2</span><span class=p>,</span>
<a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a>    <span class=p>]</span>
<a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=p>);</span>
<a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a>
<a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a><span class=k>if</span> <span class=p>(</span><span class=nv>$user</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>())</span> <span class=p>{</span>
<a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a>    <span class=nv>$this</span>
<a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a>        <span class=o>-&gt;</span><span class=na>dispatcher</span>
<a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a>        <span class=o>-&gt;</span><span class=na>forward</span><span class=p>(</span>
<a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a>            <span class=p>[</span>
<a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a>                <span class=s1>&#39;controller&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;index&#39;</span><span class=p>,</span>
<a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a>                <span class=s1>&#39;action&#39;</span>     <span class=o>=&gt;</span> <span class=s1>&#39;index&#39;</span><span class=p>,</span>
<a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a>            <span class=p>]</span>
<a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a>        <span class=p>);</span>
<a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a><span class=p>}</span>
</code></pre></div> <p>If the <code>$user-&gt;save()</code> returns <code>true</code>, the user will be forwarded to the home page (<code>index/index</code>) and a success message will appear on the screen.</p> <h3 id=model>Model<a class=headerlink href=#model title="Permanent link">&para;</a></h3> <p><strong>Relationships</strong></p> <p>Now we need to check the <code>Users</code> model since there is some logic we have applied there, in particular the <code>afterSave</code> and <code>beforeValidationOnCreate</code> events.</p> <p>The core method, the setup if you like happens in the <code>initialize</code> method. That is the spot where we set all the <a href=../db-models-relationships/ >relationships</a> for the model. For the <code>Users</code> class, we have several relationships defined. Why relationships you might ask? Phalcon offers an easy way to retrieve related data to a particular model.</p> <p>If for instance, we want to check all the successful logins for a particular user, we can do so with the following code snippet:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>
<a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=k>use</span> <span class=nx>Vokuro\Models\SuccessLogins</span><span class=p>;</span>
<a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=k>use</span> <span class=nx>Vokuro\Models\Users</span><span class=p>;</span>
<a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>
<a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=nv>$user</span> <span class=o>=</span> <span class=nx>Users</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>    <span class=p>[</span>
<a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;id = :id:&#39;</span><span class=p>,</span>
<a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>            <span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=mi>7</span><span class=p>,</span>
<a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>        <span class=p>]</span> 
<a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a>    <span class=p>]</span>
<a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a><span class=p>);</span>
<a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a>
<a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a><span class=nv>$logins</span> <span class=o>=</span> <span class=nx>SuccessLogin</span><span class=o>::</span><span class=na>find</span><span class=p>(</span>
<a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a>    <span class=p>[</span>
<a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;userId = :userId:&#39;</span><span class=p>,</span>
<a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-37-20 name=__codelineno-37-20 href=#__codelineno-37-20></a>            <span class=s1>&#39;userId&#39;</span> <span class=o>=&gt;</span> <span class=mi>7</span><span class=p>,</span>
<a id=__codelineno-37-21 name=__codelineno-37-21 href=#__codelineno-37-21></a>        <span class=p>]</span> 
<a id=__codelineno-37-22 name=__codelineno-37-22 href=#__codelineno-37-22></a>    <span class=p>]</span>
<a id=__codelineno-37-23 name=__codelineno-37-23 href=#__codelineno-37-23></a><span class=p>);</span>
</code></pre></div> <p>The above code gets the user with ID <code>7</code> and then gets all the successful logins from the relevant table for that user.</p> <p>Using relationships we can let Phalcon do all the heavy lifting for us. So the code above becomes:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a>
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=k>use</span> <span class=nx>Vokuro\Models\SuccessLogins</span><span class=p>;</span>
<a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=k>use</span> <span class=nx>Vokuro\Models\Users</span><span class=p>;</span>
<a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a>
<a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=nv>$user</span> <span class=o>=</span> <span class=nx>Users</span><span class=o>::</span><span class=na>findFirst</span><span class=p>(</span>
<a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a>    <span class=p>[</span>
<a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a>        <span class=s1>&#39;conditions&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;id = :id:&#39;</span><span class=p>,</span>
<a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>        <span class=s1>&#39;bind&#39;</span>       <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a>            <span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=mi>7</span><span class=p>,</span>
<a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a>        <span class=p>]</span> 
<a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a>    <span class=p>]</span>
<a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a><span class=p>);</span>
<a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a>
<a id=__codelineno-38-16 name=__codelineno-38-16 href=#__codelineno-38-16></a><span class=nv>$logins</span> <span class=o>=</span> <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>successLogins</span><span class=p>;</span>
<a id=__codelineno-38-17 name=__codelineno-38-17 href=#__codelineno-38-17></a>
<a id=__codelineno-38-18 name=__codelineno-38-18 href=#__codelineno-38-18></a><span class=nv>$logins</span> <span class=o>=</span> <span class=nv>$user</span><span class=o>-&gt;</span><span class=na>getRelated</span><span class=p>(</span><span class=s1>&#39;successLogins&#39;</span><span class=p>);</span>
</code></pre></div> <p>The last two lines do exactly the same thing. It is a matter of preference which syntax you want to use. Phalcon will query the related table, filtering the related table with the id of the user.</p> <p>For our <code>Users</code> table we define the following relationships:</p> <table> <thead> <tr> <th>Name</th> <th>Source field</th> <th>Target field</th> <th>Model</th> </tr> </thead> <tbody> <tr> <td><code>passwordChanges</code></td> <td><code>id</code></td> <td><code>usersId</code></td> <td><code>PasswordChanges</code></td> </tr> <tr> <td><code>profile</code></td> <td><code>profileId</code></td> <td><code>id</code></td> <td><code>Profiles</code></td> </tr> <tr> <td><code>resetPasswords</code></td> <td><code>id</code></td> <td><code>usersId</code></td> <td><code>ResetPasswords</code></td> </tr> <tr> <td><code>successLogins</code></td> <td><code>id</code></td> <td><code>usersId</code></td> <td><code>SuccessLogins</code></td> </tr> </tbody> </table> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>
<a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=k>namespace</span> <span class=nx>Vokuro\Models</span><span class=p>;</span>
<a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a>
<a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=k>use</span> <span class=nx>Phalcon\Validation</span><span class=p>;</span>
<a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=k>use</span> <span class=nx>Phalcon\Validation\Validator\Uniqueness</span><span class=p>;</span>
<a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a>
<a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a><span class=k>class</span> <span class=nc>Users</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a><span class=p>{</span>
<a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a>    <span class=c1>// ...</span>
<a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>
<a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>initialize</span><span class=p>()</span>
<a id=__codelineno-39-15 name=__codelineno-39-15 href=#__codelineno-39-15></a>    <span class=p>{</span>
<a id=__codelineno-39-16 name=__codelineno-39-16 href=#__codelineno-39-16></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>belongsTo</span><span class=p>(</span>
<a id=__codelineno-39-17 name=__codelineno-39-17 href=#__codelineno-39-17></a>            <span class=s1>&#39;profilesId&#39;</span><span class=p>,</span> 
<a id=__codelineno-39-18 name=__codelineno-39-18 href=#__codelineno-39-18></a>            <span class=nx>Profiles</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-39-19 name=__codelineno-39-19 href=#__codelineno-39-19></a>            <span class=s1>&#39;id&#39;</span><span class=p>,</span> 
<a id=__codelineno-39-20 name=__codelineno-39-20 href=#__codelineno-39-20></a>            <span class=p>[</span>
<a id=__codelineno-39-21 name=__codelineno-39-21 href=#__codelineno-39-21></a>                <span class=s1>&#39;alias&#39;</span>    <span class=o>=&gt;</span> <span class=s1>&#39;profile&#39;</span><span class=p>,</span>
<a id=__codelineno-39-22 name=__codelineno-39-22 href=#__codelineno-39-22></a>                <span class=s1>&#39;reusable&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
<a id=__codelineno-39-23 name=__codelineno-39-23 href=#__codelineno-39-23></a>            <span class=p>]</span>
<a id=__codelineno-39-24 name=__codelineno-39-24 href=#__codelineno-39-24></a>        <span class=p>);</span>
<a id=__codelineno-39-25 name=__codelineno-39-25 href=#__codelineno-39-25></a>
<a id=__codelineno-39-26 name=__codelineno-39-26 href=#__codelineno-39-26></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-39-27 name=__codelineno-39-27 href=#__codelineno-39-27></a>            <span class=s1>&#39;id&#39;</span><span class=p>,</span> 
<a id=__codelineno-39-28 name=__codelineno-39-28 href=#__codelineno-39-28></a>            <span class=nx>SuccessLogins</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-39-29 name=__codelineno-39-29 href=#__codelineno-39-29></a>            <span class=s1>&#39;usersId&#39;</span><span class=p>,</span> 
<a id=__codelineno-39-30 name=__codelineno-39-30 href=#__codelineno-39-30></a>            <span class=p>[</span>
<a id=__codelineno-39-31 name=__codelineno-39-31 href=#__codelineno-39-31></a>                <span class=s1>&#39;alias&#39;</span>      <span class=o>=&gt;</span> <span class=s1>&#39;successLogins&#39;</span><span class=p>,</span>
<a id=__codelineno-39-32 name=__codelineno-39-32 href=#__codelineno-39-32></a>                <span class=s1>&#39;foreignKey&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-39-33 name=__codelineno-39-33 href=#__codelineno-39-33></a>                    <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;User cannot be deleted because &#39;</span> <span class=o>.</span>
<a id=__codelineno-39-34 name=__codelineno-39-34 href=#__codelineno-39-34></a>                                 <span class=s1>&#39;he/she has activity in the system&#39;</span><span class=p>,</span>
<a id=__codelineno-39-35 name=__codelineno-39-35 href=#__codelineno-39-35></a>                <span class=p>],</span>
<a id=__codelineno-39-36 name=__codelineno-39-36 href=#__codelineno-39-36></a>            <span class=p>]</span>
<a id=__codelineno-39-37 name=__codelineno-39-37 href=#__codelineno-39-37></a>        <span class=p>);</span>
<a id=__codelineno-39-38 name=__codelineno-39-38 href=#__codelineno-39-38></a>
<a id=__codelineno-39-39 name=__codelineno-39-39 href=#__codelineno-39-39></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-39-40 name=__codelineno-39-40 href=#__codelineno-39-40></a>            <span class=s1>&#39;id&#39;</span><span class=p>,</span> 
<a id=__codelineno-39-41 name=__codelineno-39-41 href=#__codelineno-39-41></a>            <span class=nx>PasswordChanges</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-39-42 name=__codelineno-39-42 href=#__codelineno-39-42></a>            <span class=s1>&#39;usersId&#39;</span><span class=p>,</span> 
<a id=__codelineno-39-43 name=__codelineno-39-43 href=#__codelineno-39-43></a>            <span class=p>[</span>
<a id=__codelineno-39-44 name=__codelineno-39-44 href=#__codelineno-39-44></a>                <span class=s1>&#39;alias&#39;</span>      <span class=o>=&gt;</span> <span class=s1>&#39;passwordChanges&#39;</span><span class=p>,</span>
<a id=__codelineno-39-45 name=__codelineno-39-45 href=#__codelineno-39-45></a>                <span class=s1>&#39;foreignKey&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-39-46 name=__codelineno-39-46 href=#__codelineno-39-46></a>                    <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;User cannot be deleted because &#39;</span> <span class=o>.</span>
<a id=__codelineno-39-47 name=__codelineno-39-47 href=#__codelineno-39-47></a>                                 <span class=s1>&#39;he/she has activity in the system&#39;</span><span class=p>,</span>
<a id=__codelineno-39-48 name=__codelineno-39-48 href=#__codelineno-39-48></a>                <span class=p>],</span>
<a id=__codelineno-39-49 name=__codelineno-39-49 href=#__codelineno-39-49></a>            <span class=p>]</span>
<a id=__codelineno-39-50 name=__codelineno-39-50 href=#__codelineno-39-50></a>        <span class=p>);</span>
<a id=__codelineno-39-51 name=__codelineno-39-51 href=#__codelineno-39-51></a>
<a id=__codelineno-39-52 name=__codelineno-39-52 href=#__codelineno-39-52></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>hasMany</span><span class=p>(</span>
<a id=__codelineno-39-53 name=__codelineno-39-53 href=#__codelineno-39-53></a>            <span class=s1>&#39;id&#39;</span><span class=p>,</span> 
<a id=__codelineno-39-54 name=__codelineno-39-54 href=#__codelineno-39-54></a>            <span class=nx>ResetPasswords</span><span class=o>::</span><span class=na>class</span><span class=p>,</span> 
<a id=__codelineno-39-55 name=__codelineno-39-55 href=#__codelineno-39-55></a>            <span class=s1>&#39;usersId&#39;</span><span class=p>,</span> <span class=p>[</span>
<a id=__codelineno-39-56 name=__codelineno-39-56 href=#__codelineno-39-56></a>            <span class=s1>&#39;alias&#39;</span>      <span class=o>=&gt;</span> <span class=s1>&#39;resetPasswords&#39;</span><span class=p>,</span>
<a id=__codelineno-39-57 name=__codelineno-39-57 href=#__codelineno-39-57></a>            <span class=s1>&#39;foreignKey&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-39-58 name=__codelineno-39-58 href=#__codelineno-39-58></a>                <span class=s1>&#39;message&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;User cannot be deleted because &#39;</span> <span class=o>.</span>
<a id=__codelineno-39-59 name=__codelineno-39-59 href=#__codelineno-39-59></a>                             <span class=s1>&#39;he/she has activity in the system&#39;</span><span class=p>,</span>
<a id=__codelineno-39-60 name=__codelineno-39-60 href=#__codelineno-39-60></a>            <span class=p>],</span>
<a id=__codelineno-39-61 name=__codelineno-39-61 href=#__codelineno-39-61></a>        <span class=p>]);</span>
<a id=__codelineno-39-62 name=__codelineno-39-62 href=#__codelineno-39-62></a>    <span class=p>}</span>
<a id=__codelineno-39-63 name=__codelineno-39-63 href=#__codelineno-39-63></a>
<a id=__codelineno-39-64 name=__codelineno-39-64 href=#__codelineno-39-64></a>    <span class=c1>// ...</span>
<a id=__codelineno-39-65 name=__codelineno-39-65 href=#__codelineno-39-65></a><span class=p>}</span>
</code></pre></div> <p>As you can see in the defined relationships, we have a <code>belongsTo</code> and three <code>hasMany</code>. All relationships have an alias so that we can access them easier. The <code>belongsTo</code> relationship also has the <code>reusable</code> flag set to on. This means that if the relationship is called more than once in the same request, Phalcon would perform the database query only the first time and cache the resultset. Any subsequent calls will use the cached resultset.</p> <p>Also, notable is that we define specific messages for foreign keys. If the particular relationship is violated, the defined message will be raised.</p> <p><strong>Events</strong></p> <p>[Phalcon\Mvc\Model][db-models] is designed to fire specific <a href=../events/ >events</a>. These event methods can be located either in a listener or in the same model.</p> <p>For the <code>Users</code> model, we attach code to the <code>afterSave</code> and <code>beforeValidationOnCreate</code> events.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>
<a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=k>namespace</span> <span class=nx>Vokuro\Models</span><span class=p>;</span>
<a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>
<a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=k>use</span> <span class=nx>Phalcon\Validation</span><span class=p>;</span>
<a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=k>use</span> <span class=nx>Phalcon\Validation\Validator\Uniqueness</span><span class=p>;</span>
<a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a>
<a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=k>class</span> <span class=nc>Users</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a><span class=p>{</span>
<a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>beforeValidationOnCreate</span><span class=p>()</span>
<a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a>    <span class=p>{</span>
<a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a>        <span class=k>if</span> <span class=p>(</span><span class=k>true</span> <span class=o>===</span> <span class=k>empty</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>password</span><span class=p>))</span> <span class=p>{</span>
<a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a>            <span class=nv>$tempPassword</span> <span class=o>=</span> <span class=nb>preg_replace</span><span class=p>(</span>
<a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a>                <span class=s1>&#39;/[^a-zA-Z0-9]/&#39;</span><span class=p>,</span> 
<a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a>                <span class=s1>&#39;&#39;</span><span class=p>,</span> 
<a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a>                <span class=nb>base64_encode</span><span class=p>(</span><span class=nb>openssl_random_pseudo_bytes</span><span class=p>(</span><span class=mi>12</span><span class=p>))</span>
<a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a>            <span class=p>);</span>
<a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a>
<a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>mustChangePassword</span> <span class=o>=</span> <span class=s1>&#39;Y&#39;</span><span class=p>;</span>
<a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a>
<a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>password</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getDI</span><span class=p>()</span>
<a id=__codelineno-40-24 name=__codelineno-40-24 href=#__codelineno-40-24></a>                                   <span class=o>-&gt;</span><span class=na>getSecurity</span><span class=p>()</span>
<a id=__codelineno-40-25 name=__codelineno-40-25 href=#__codelineno-40-25></a>                                   <span class=o>-&gt;</span><span class=na>hash</span><span class=p>(</span><span class=nv>$tempPassword</span><span class=p>)</span>
<a id=__codelineno-40-26 name=__codelineno-40-26 href=#__codelineno-40-26></a>            <span class=p>;</span>
<a id=__codelineno-40-27 name=__codelineno-40-27 href=#__codelineno-40-27></a>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
<a id=__codelineno-40-28 name=__codelineno-40-28 href=#__codelineno-40-28></a>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>mustChangePassword</span> <span class=o>=</span> <span class=s1>&#39;N&#39;</span><span class=p>;</span>
<a id=__codelineno-40-29 name=__codelineno-40-29 href=#__codelineno-40-29></a>        <span class=p>}</span>
<a id=__codelineno-40-30 name=__codelineno-40-30 href=#__codelineno-40-30></a>
<a id=__codelineno-40-31 name=__codelineno-40-31 href=#__codelineno-40-31></a>        <span class=k>if</span> <span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getDI</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>get</span><span class=p>(</span><span class=s1>&#39;config&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>useMail</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-40-32 name=__codelineno-40-32 href=#__codelineno-40-32></a>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>active</span> <span class=o>=</span> <span class=s1>&#39;N&#39;</span><span class=p>;</span>
<a id=__codelineno-40-33 name=__codelineno-40-33 href=#__codelineno-40-33></a>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
<a id=__codelineno-40-34 name=__codelineno-40-34 href=#__codelineno-40-34></a>            <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>active</span> <span class=o>=</span> <span class=s1>&#39;Y&#39;</span><span class=p>;</span>
<a id=__codelineno-40-35 name=__codelineno-40-35 href=#__codelineno-40-35></a>        <span class=p>}</span>
<a id=__codelineno-40-36 name=__codelineno-40-36 href=#__codelineno-40-36></a>
<a id=__codelineno-40-37 name=__codelineno-40-37 href=#__codelineno-40-37></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>suspended</span> <span class=o>=</span> <span class=s1>&#39;N&#39;</span><span class=p>;</span>
<a id=__codelineno-40-38 name=__codelineno-40-38 href=#__codelineno-40-38></a>
<a id=__codelineno-40-39 name=__codelineno-40-39 href=#__codelineno-40-39></a>        <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>banned</span> <span class=o>=</span> <span class=s1>&#39;N&#39;</span><span class=p>;</span>
<a id=__codelineno-40-40 name=__codelineno-40-40 href=#__codelineno-40-40></a>    <span class=p>}</span>
<a id=__codelineno-40-41 name=__codelineno-40-41 href=#__codelineno-40-41></a><span class=p>}</span>
</code></pre></div> <p>The <code>beforeValidationOnCreate</code> will fire every time we have a new record (<code>Create</code>), before any validations occur. We check if we have a defined password and if not, we will generate a random string, then hash that string using <a href=../encryption-security/ >Phalcon\Encryption\Security</a> and store it in the <code>password</code> property. We also set the flag to change the password.</p> <p>If the password is not empty, we just set the <code>mustChangePassword</code> field to <code>N</code>. Finally, we set some defaults on whether the user is <code>active</code>, <code>suspended</code>, or <code>banned</code>. This ensures that our record is ready before it is inserted into the database.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>
<a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=k>namespace</span> <span class=nx>Vokuro\Models</span><span class=p>;</span>
<a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a>
<a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=k>use</span> <span class=nx>Phalcon\Validation</span><span class=p>;</span>
<a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=k>use</span> <span class=nx>Phalcon\Validation\Validator\Uniqueness</span><span class=p>;</span>
<a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a>
<a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a><span class=k>class</span> <span class=nc>Users</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a><span class=p>{</span>
<a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>afterSave</span><span class=p>()</span>
<a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a>    <span class=p>{</span>
<a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a>        <span class=k>if</span> <span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getDI</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>get</span><span class=p>(</span><span class=s1>&#39;config&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>useMail</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-41-15 name=__codelineno-41-15 href=#__codelineno-41-15></a>            <span class=k>if</span> <span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>active</span> <span class=o>==</span> <span class=s1>&#39;N&#39;</span><span class=p>)</span> <span class=p>{</span>
<a id=__codelineno-41-16 name=__codelineno-41-16 href=#__codelineno-41-16></a>                <span class=nv>$emailConfirmation</span>          <span class=o>=</span> <span class=k>new</span> <span class=nx>EmailConfirmations</span><span class=p>();</span>
<a id=__codelineno-41-17 name=__codelineno-41-17 href=#__codelineno-41-17></a>                <span class=nv>$emailConfirmation</span><span class=o>-&gt;</span><span class=na>usersId</span> <span class=o>=</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>;</span>
<a id=__codelineno-41-18 name=__codelineno-41-18 href=#__codelineno-41-18></a>
<a id=__codelineno-41-19 name=__codelineno-41-19 href=#__codelineno-41-19></a>                <span class=k>if</span> <span class=p>(</span><span class=nv>$emailConfirmation</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>())</span> <span class=p>{</span>
<a id=__codelineno-41-20 name=__codelineno-41-20 href=#__codelineno-41-20></a>                    <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>getDI</span><span class=p>()</span>
<a id=__codelineno-41-21 name=__codelineno-41-21 href=#__codelineno-41-21></a>                         <span class=o>-&gt;</span><span class=na>getFlash</span><span class=p>()</span>
<a id=__codelineno-41-22 name=__codelineno-41-22 href=#__codelineno-41-22></a>                         <span class=o>-&gt;</span><span class=na>notice</span><span class=p>(</span>
<a id=__codelineno-41-23 name=__codelineno-41-23 href=#__codelineno-41-23></a>                            <span class=s1>&#39;A confirmation mail has &#39;</span> <span class=o>.</span>
<a id=__codelineno-41-24 name=__codelineno-41-24 href=#__codelineno-41-24></a>                            <span class=s1>&#39;been sent to &#39;</span> <span class=o>.</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>email</span>
<a id=__codelineno-41-25 name=__codelineno-41-25 href=#__codelineno-41-25></a>                        <span class=p>)</span>
<a id=__codelineno-41-26 name=__codelineno-41-26 href=#__codelineno-41-26></a>                    <span class=p>;</span>
<a id=__codelineno-41-27 name=__codelineno-41-27 href=#__codelineno-41-27></a>                <span class=p>}</span>
<a id=__codelineno-41-28 name=__codelineno-41-28 href=#__codelineno-41-28></a>            <span class=p>}</span>
<a id=__codelineno-41-29 name=__codelineno-41-29 href=#__codelineno-41-29></a>        <span class=p>}</span>
<a id=__codelineno-41-30 name=__codelineno-41-30 href=#__codelineno-41-30></a>    <span class=p>}</span>
<a id=__codelineno-41-31 name=__codelineno-41-31 href=#__codelineno-41-31></a><span class=p>}</span>
</code></pre></div> <p>The <code>afterSave</code> event fires right after a record is saved in the database. In this event, we check if emails have been enabled (see <code>.env</code> file <code>useMail</code> setting), and if active we create a new record in the <code>EmailConfirmations</code> table and then save the record. Once everything is done, a notice will appear on the screen.</p> <div class="admonition info"> <p class=admonition-title>NOTE</p> <p>Note that the <code>EmailConfirmations</code> model also has an <code>afterCreate</code> event, which is responsible for actually sending the email to the user.</p> </div> <p><strong>Validation</strong></p> <p>The model also has the <code>validate</code> method which allows us to attach a validator to any number of fields in our model. For the <code>Users</code> table, we need the <code>email</code> to be unique. As such, we attach the <code>Uniqueness</code> <a href=../filter-validation/ >validator</a> to it. The validator will fire right before any save operation is performed on the model and the message will be returned if the validation fails.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=o>&lt;?</span><span class=nx>php</span>
<a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
<a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a>
<a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=k>namespace</span> <span class=nx>Vokuro\Models</span><span class=p>;</span>
<a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a>
<a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=k>use</span> <span class=nx>Phalcon\Mvc\Model</span><span class=p>;</span>
<a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=k>use</span> <span class=nx>Phalcon\Validation</span><span class=p>;</span>
<a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a><span class=k>use</span> <span class=nx>Phalcon\Validation\Validator\Uniqueness</span><span class=p>;</span>
<a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a>
<a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a><span class=k>class</span> <span class=nc>Users</span> <span class=k>extends</span> <span class=nx>Model</span>
<a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a><span class=p>{</span>
<a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a>    <span class=k>public</span> <span class=k>function</span> <span class=nf>validation</span><span class=p>()</span>
<a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a>    <span class=p>{</span>
<a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a>        <span class=nv>$validator</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Validation</span><span class=p>();</span>
<a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a>
<a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a>        <span class=nv>$validator</span><span class=o>-&gt;</span><span class=na>add</span><span class=p>(</span>
<a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a>            <span class=s1>&#39;email&#39;</span><span class=p>,</span> 
<a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a>            <span class=k>new</span> <span class=nx>Uniqueness</span><span class=p>(</span>
<a id=__codelineno-42-19 name=__codelineno-42-19 href=#__codelineno-42-19></a>                <span class=p>[</span>
<a id=__codelineno-42-20 name=__codelineno-42-20 href=#__codelineno-42-20></a>                    <span class=s2>&quot;message&quot;</span> <span class=o>=&gt;</span> <span class=s2>&quot;The email is already registered&quot;</span><span class=p>,</span>
<a id=__codelineno-42-21 name=__codelineno-42-21 href=#__codelineno-42-21></a>                <span class=p>]</span>
<a id=__codelineno-42-22 name=__codelineno-42-22 href=#__codelineno-42-22></a>            <span class=p>)</span>
<a id=__codelineno-42-23 name=__codelineno-42-23 href=#__codelineno-42-23></a>        <span class=p>);</span>
<a id=__codelineno-42-24 name=__codelineno-42-24 href=#__codelineno-42-24></a>
<a id=__codelineno-42-25 name=__codelineno-42-25 href=#__codelineno-42-25></a>        <span class=k>return</span> <span class=nv>$this</span><span class=o>-&gt;</span><span class=na>validate</span><span class=p>(</span><span class=nv>$validator</span><span class=p>);</span>
<a id=__codelineno-42-26 name=__codelineno-42-26 href=#__codelineno-42-26></a>    <span class=p>}</span>
<a id=__codelineno-42-27 name=__codelineno-42-27 href=#__codelineno-42-27></a><span class=p>}</span>
</code></pre></div> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h2> <p>Vökuró is a sample application that we use to demonstrate some of the features that Phalcon offers. It is definitely not a solution that will fit all needs. However, you can use it as a starting point to develop your application.</p> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ul> <li><a href=../acl/ >Access Control Lists definition</a></li> <li><a href=https://getcomposer.org>Composer</a></li> <li><a href=https://github.com/vlucas/phpdotenv>DotEnv - Vance Lucas</a></li> <li><a href=https://en.wikipedia.org/wiki/Model–view–controller>Model-View-Controller definition</a></li> <li><a href=https://github.com/cakephp/phinx>Phinx - Cake PHP</a></li> <li><a href=https://swiftmailer.symfony.com>Swift Mailer</a></li> <li><a href=../acl/ >Phalcon ACL</a></li> <li><a href=../forms/ >Phalcon Forms</a></li> <li><a href=../response/ >Phalcon HTTP Response</a></li> <li><a href=../encryption-security/ >Phalcon Security</a></li> <li><a href=https://github.com/phalcon/vokuro>Vökuró - GitHub Repository</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../tutorial-rest/ class="md-footer__link md-footer__link--prev" aria-label="Previous: REST"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> REST </div> </div> </a> <a href=../use-case/ class="md-footer__link md-footer__link--next" aria-label="Next: Use case"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Use case </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2012 - present Phalcon Team </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://phalcon.io/discord target=_blank rel=noopener title=Discord class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg> </a> <a href=https://phalcon.io/discussions target=_blank rel=noopener title="GitHub Discussions" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29H9Z"/></svg> </a> <a href=https://phalcon.io/github target=_blank rel=noopener title="GitHub Project" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://phalcon.io/telegram target=_blank rel=noopener title=Telegram class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg> </a> <a href=https://phalcon.io/gab target=_blank rel=noopener title=Gab class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M368 32c41.7 0 75.9 31.8 79.7 72.5l85.6 26.3c25.4 7.8 42.8 31.3 42.8 57.9 0 21.8-11.7 41.9-30.7 52.7l-144.6 82.1 92.5 92.5H544c17.7 0 32 14.3 32 32s-14.3 32-32 32h-64c-8.5 0-16.6-3.4-22.6-9.4L346.9 360.2c11.7-36 3.2-77.1-25.4-105.7-40.6-40.6-106.3-40.6-146.9-.1l-73.6 70c-6.4 6.1-6.7 16.2-.6 22.6s16.2 6.6 22.6.6l73.8-70.2.1-.1.1-.1c3.5-3.5 7.3-6.6 11.3-9.2 27.9-18.5 65.9-15.4 90.5 9.2 24.7 24.7 27.7 62.9 9 90.9-2.6 3.8-5.6 7.5-9 10.9l-37 37H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-35.3 0-64-28.7-64-64C0 249.6 127 112.9 289.3 97.5 296.2 60.2 328.8 32 368 32zm0 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"/></svg> </a> <a href=https://phalcon.io/t target=_blank rel=noopener title=Twitter class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg> </a> <a href=https://phalcon.io/fb target=_blank rel=noopener title=Facebook class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z"/></svg> </a> <a href=https://phalcon.io/linkedin target=_blank rel=noopener title=LinkedIn class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://phalcon.io/youtube target=_blank rel=noopener title=LinkedIn class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "5.4.0", "provider": "mike"}}</script> <script src=../assets/javascripts/bundle.ad660dcc.min.js></script> </body> </html>